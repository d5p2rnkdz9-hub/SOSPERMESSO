<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Documenti necessari per l'aggiornamento della Carta di soggiorno UE per soggiornanti di lungo periodo">
  <title>Documenti Carta di Soggiorno UE - Aggiornamento - SOS Permesso</title>

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="../../IMAGES/logo-full.png">
  <link rel="shortcut icon" type="image/png" href="../../IMAGES/logo-full.png">
  <link rel="apple-touch-icon" href="../../IMAGES/logo-full.png">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@600;700;800&display=swap" rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="../styles/main.css">
  <link rel="stylesheet" href="../styles/components.css">
  <link rel="stylesheet" href="../styles/animations.css">
  <link rel="stylesheet" href="../styles/mobile.css">
  <link rel="stylesheet" href="../styles/mobile-fix.css">
  <link rel="stylesheet" href="../styles/document-page.css">
</head>
<body class="page-rinnovo">

  <!-- HEADER -->
  <header class="header">
    <div class="container">
      <nav class="navbar">
        <a href="../../index.html" class="logo">
          <img src="../../images/logo-full.png" alt="SOS Permesso" class="logo-image">
        </a>
        <button class="menu-toggle" id="menu-toggle">‚ò∞</button>

        <div class="nav-wrapper">
          <ul class="nav-menu" id="nav-menu">
            <!-- Database with dropdown -->
            <li class="nav-item has-dropdown">
              <a href="#database" class="nav-link" aria-haspopup="true" aria-expanded="false">Database</a>
              <ul class="nav-dropdown" role="menu">
                <li role="none"><a href="database.html" class="dropdown-link" role="menuitem">Database di permessi</a></li>
                <li role="none"><a href="documenti-questura.html" class="dropdown-link" role="menuitem">Che documenti porto in Questura</a></li>
              </ul>
            </li>

            <!-- Guide with dropdown -->
            <li class="nav-item has-dropdown">
              <a href="#guide" class="nav-link" aria-haspopup="true" aria-expanded="false">Guide</a>
              <ul class="nav-dropdown" role="menu">
                <li role="none"><a href="protezione-internazionale.html" class="dropdown-link" role="menuitem">Protezione internazionale</a></li>
                <li role="none"><a href="permesso-ricongiungimento-familiare.html" class="dropdown-link" role="menuitem">Ricongiungimento familiare</a></li>
                <li role="none"><a href="dizionario.html" class="dropdown-link" role="menuitem">Dizionario</a></li>
              </ul>
            </li>

            <!-- Test with dropdown -->
            <li class="nav-item has-dropdown">
              <a href="#test" class="nav-link" aria-haspopup="true" aria-expanded="false">Test</a>
              <ul class="nav-dropdown" role="menu">
                <li role="none"><a href="https://form.typeform.com/to/kt7P9Ejk" class="dropdown-link" role="menuitem" target="_blank">Posso AVERE un permesso?</a></li>
                <li role="none"><a href="https://form.typeform.com/to/oc9jhdkJ" class="dropdown-link" role="menuitem" target="_blank">Posso CONVERTIRE?</a></li>
                <li role="none"><a href="https://form.typeform.com/to/R7HY8nBp" class="dropdown-link" role="menuitem" target="_blank">Posso RINNOVARE il permesso?</a></li>
              </ul>
            </li>

            <!-- Il progetto - no dropdown -->
                        <!-- Collabora with dropdown -->
            <li class="nav-item has-dropdown">
              <a href="#collabora" class="nav-link" aria-haspopup="true" aria-expanded="false">Collabora</a>
              <ul class="nav-dropdown" role="menu">
                <li role="none"><a href="https://form.typeform.com/to/FsqvzdXI" class="dropdown-link" role="menuitem" target="_blank">Segnala un errore</a></li>
                                <li role="none"><a href="https://form.typeform.com/to/USx16QN3" class="dropdown-link" role="menuitem" target="_blank">Dai una mano</a></li>
                <li role="none"><a href="chi-siamo.html" class="dropdown-link" role="menuitem">Il progetto</a></li>
              </ul>
            </li>
          </ul>

          <div class="language-switcher">
            <button class="language-button" id="language-toggle">
              <span id="current-language">IT üáÆüáπ</span>
              <span>‚ñæ</span>
            </button>
          </div>
        </div>
      </nav>
    </div>
  </header>

  <!-- BREADCRUMB -->
  <section class="section" style="padding: 1rem 0;">
    <div class="container">
      <div style="font-size: 0.875rem; color: var(--gray-medium);">
        <a href="../../index.html" style="color: var(--taxi-yellow-dark);">Home</a> ‚Üí
        <a href="documenti-questura.html" style="color: var(--taxi-yellow-dark);">Documenti Questura</a> ‚Üí
        <span>Carta di Soggiorno UE - Aggiornamento</span>
      </div>
    </div>
  </section>

  <!-- PAGE HEADER -->
  <section class="section bg-off-white" style="padding: 1.5rem 0;">
    <div class="container">
      <div class="page-header text-center">
        <h1 class="page-title" style="margin-bottom: 0.25rem;">Carta di Soggiorno UE (lungo periodo)</h1>
        <p class="section-subtitle" style="margin-bottom: 0.5rem;">Documenti per l'<strong>Aggiornamento</strong></p>
        <a href="documenti-carta-di-soggiorno-psuelp-art-9-primo.html" class="quick-switch-link">
          Vedi anche: Primo Rilascio ‚Üí
        </a>
      </div>
    </div>
  </section>

  <!-- SPECIAL INFO ABOUT AGGIORNAMENTO -->
  <section class="section" style="padding: 0.5rem 0;">
    <div class="container" style="max-width: 700px;">
      <div class="alert alert-info" style="background: #E3F2FD; border: 1.5px solid #42A5F5; border-radius: 8px;">
        <span class="alert-icon">‚ÑπÔ∏è</span>
        <div>
          <strong>Cos'√® l'aggiornamento?</strong><br>
          La Carta di Soggiorno UE per soggiornanti di lungo periodo ha una <strong>validit√† di 10 anni</strong>.
          Alla scadenza non si "rinnova" ma si richiede un <strong>aggiornamento</strong>.
          In pratica √® molto simile a un rinnovo, ma con questo nome specifico.
        </div>
      </div>
    </div>
  </section>

  <!-- SUBMISSION METHOD CALLOUT -->
  <section class="section" style="padding: 1rem 0;">
    <div class="container" style="max-width: 700px;">
      <div class="submission-callout callout-kit">
        <span class="callout-icon">üìÆ</span>
        <div class="callout-text">Invia tramite KIT alle Poste (non devi andare in Questura)</div>
      </div>
    </div>
  </section>

  <!-- DOCUMENT CHECKLIST -->
  <section class="section">
    <div class="container" style="max-width: 700px;">
      <div class="card">
        <h2>üìã Documenti necessari</h2>
        <p class="checklist-intro">Spunta i documenti che hai gi√† preparato. I tuoi progressi vengono salvati automaticamente.</p>

        <div class="doc-checklist" data-permit="carta-di-soggiorno-psuelp-art-9-rinnovo">
          <div class="doc-item">
            <input type="checkbox"
                   class="doc-checkbox"
                   id="doc-ue-rinnovo-0"
                   data-doc="Copia permesso precedente (o denuncia smarrimento)">
            <span class="doc-label">Copia permesso precedente (o denuncia smarrimento)</span>
          </div>
          <div class="doc-item">
            <input type="checkbox"
                   class="doc-checkbox"
                   id="doc-ue-rinnovo-1"
                   data-doc="4 fototessere">
            <span class="doc-label">4 fototessere</span>
          </div>
          <div class="doc-item">
            <input type="checkbox"
                   class="doc-checkbox"
                   id="doc-ue-rinnovo-2"
                   data-doc="Prova di residenza">
            <span class="doc-label">Prova di residenza (contratto di affitto o attestato di propriet√†)</span>
          </div>
          <div class="doc-item">
            <input type="checkbox"
                   class="doc-checkbox"
                   id="doc-ue-rinnovo-3"
                   data-doc="Prova dei redditi ultimi 3 anni">
            <span class="doc-label">Prova dei redditi degli ultimi 3 anni</span>
          </div>
        </div>

        <div class="checklist-progress">
          <span class="progress-text">Completati: <span id="progress-count">0</span>/4</span>
          <div class="progress-bar">
            <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
          </div>
        </div>
      </div>

      <!-- OPTIONAL DOCUMENT WARNING -->
      <div class="alert alert-warning" style="margin-top: 1rem;">
        <span class="alert-icon">‚ö†Ô∏è</span>
        <div>
          <strong>Alcune Questure potrebbero chiedere anche:</strong><br>
          Prova della mancanza di reati e procedimenti penali. Ti consigliamo di richiedere una <strong>visura penale</strong> (si pu√≤ chiedere gratis in Procura).
        </div>
      </div>

      <div class="alert alert-warning" style="margin-top: 0.75rem;">
        <span class="alert-icon">‚ö†Ô∏è</span>
        <div>
          <strong>Nota:</strong> I documenti richiesti possono variare da Questura a Questura. Contatta sempre la tua Questura per confermare la lista esatta.
        </div>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
    <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <a href="chi-siamo.html" class="footer-project-link">Il Progetto</a>
        <span class="footer-separator">|</span>
        <a href="https://form.typeform.com/to/USx16QN3" class="footer-project-link" target="_blank">Contatti</a>
        <span class="footer-separator">|</span>
        <p class="footer-copyright">¬© 2025 SOS Permesso</p>
      </div>
    </div>
  </footer>

  <script src="../scripts/app.js"></script>
  <script>
    // Checklist persistence with localStorage
    (function() {
      const permitKey = 'carta-di-soggiorno-psuelp-art-9-rinnovo';
      const checkboxes = document.querySelectorAll('.doc-checkbox');
      const progressCount = document.getElementById('progress-count');
      const progressFill = document.getElementById('progress-fill');

      // Load saved state
      function loadState() {
        const saved = localStorage.getItem('checklist-' + permitKey);
        if (saved) {
          try {
            const state = JSON.parse(saved);
            state.forEach(function(item) {
              const checkbox = document.getElementById(item.id);
              if (checkbox) checkbox.checked = item.checked;
            });
          } catch (e) {
            console.warn('Failed to load checklist state:', e);
          }
        }
        updateProgress();
      }

      // Save state
      function saveState() {
        const state = Array.from(checkboxes).map(function(cb) {
          return {
            id: cb.id,
            checked: cb.checked
          };
        });
        localStorage.setItem('checklist-' + permitKey, JSON.stringify(state));
        updateProgress();
      }

      // Update progress bar
      function updateProgress() {
        const total = checkboxes.length;
        const checked = Array.from(checkboxes).filter(function(cb) { return cb.checked; }).length;
        progressCount.textContent = checked;
        progressFill.style.width = (total > 0 ? (checked / total) * 100 : 0) + '%';
      }

      // Attach event listeners
      checkboxes.forEach(function(cb) { cb.addEventListener('change', saveState); });

      // Initialize
      document.addEventListener('DOMContentLoaded', loadState);
    })();
  </script>
</body>
</html>
