# Milestone v1.7: Database Content Reviewed

**Status:** ✅ SHIPPED 2026-01-30
**Phases:** 16-17
**Total Plans:** 5

## Overview

Generate permit pages from Notion database content with standardized Q&A template. Build infrastructure for content-driven permit pages, visual consistency with triangle bullets, variant page structure for permits with multiple acquisition types.

## Phases

### Phase 16: Permit Build System

**Goal:** Create build infrastructure to generate permit pages from Notion database content.
**Depends on:** Phase 15 (Document Deduplication)
**Plans:** 2 plans

Plans:
- [x] 16-01: Create permit page HTML template
- [x] 16-02: Create build script with Notion fetching and Q&A parsing

**Details:**
- Created `scripts/templates/permesso.js` with generatePermessoPage function
- Created `scripts/build-permits.js` with Q&A parsing (3 formats: heading_3, bold paragraph, inline bold)
- Extended `scripts/notion-client.js` with fetchPageBlocks for recursive block fetching
- Generated 24 permit pages from Notion content
- Created `.planning/TODO-permits.md` tracking 20 permits needing content
- Semantic border colors for Q&A sections (blue=cos'è, yellow=requisiti, red=lavoro, teal=conversione)

**Completed:** 2026-01-28

---

### Phase 17: Content Migration & Visual Polish

**Goal:** Generate all permit pages, ensure visual consistency.
**Depends on:** Phase 16
**Plans:** 3 plans

Plans:
- [x] 17-01: Triangle bullet CSS styling
- [x] 17-02: Placeholder pages + change detection
- [x] 17-03: Variant detection & generation with user approval

**Details:**
- Added blue triangle bullets (▸) for .card ul li elements via CSS pseudo-elements
- Increased bullet size from 0.75rem to 0.85rem for visibility
- Generated 18 placeholder pages for permits without Notion content
- Implemented manifest-based change detection for incremental builds
- Created variant detection system for permits with multiple acquisition types
- Generated parent/child page structure for Lavoro subordinato variants (1 parent + 3 children)
- Fixed checkmark stripping in build script (removed ✓✔☑ from content)
- Fixed "mi da" → "mi dà" typo correction
- Simplified mobile hamburger menu to show only categories
- Updated navigation links from anchors to actual pages

**Completed:** 2026-01-30

---

## Milestone Summary

**Key Decisions:**

- Border colors based on section keywords (keyword matching then index fallback)
- Three-pattern Q&A detection (heading_3, bold paragraph, inline bold)
- Blue triangle bullets for better visibility on white backgrounds
- Manifest-based incremental builds (skip unchanged pages)
- Variant parent/child structure with subfolder URLs
- Hardcoded sanatoria variant as placeholder per user request

**Issues Resolved:**

- Notion content now generates standardized permit pages
- Visual bullet consistency (no mixed disc/checkmarks)
- Variant pages properly linked from database navigation
- Mobile navigation simplified for better UX

**Issues Deferred:**

- Homepage cleanup (moved to v1.8+)
- Desktop header alignment (moved to backlog)
- Content peer review workflow

**Technical Debt Incurred:**

- No npm script for build-permits.js (manual `node` execution)
- General content on parent pages is hardcoded placeholder (needs Notion integration)
- 18 permits still need Notion content

---

_For current project status, see .planning/ROADMAP.md_
