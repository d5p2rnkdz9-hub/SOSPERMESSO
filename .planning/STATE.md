# Project State: SOS Permesso

**Last Updated:** 2026-02-17
**Status:** v3.2 — Defining requirements

## Project Reference

See: .planning/PROJECT.md (updated 2026-02-17)

**Core value:** Users can quickly find accurate, understandable information about their specific permit type and what documents they need for the Questura.

**Current focus:** v3.2 EN Translation Pipeline

## Current Position

**Current Milestone:** v3.2 EN Translation Pipeline
**Phase:** Not started (defining requirements)
**Last activity:** 2026-02-17 — Milestone v3.2 started

```
Progress: [░░░░░░░░░░] 0%
```

## v3.2 Architecture Decision

**Approach:** Same-pipeline (Path A)
- Translation happens offline via `npm run translate`, not during every build
- Translations stored as JSON in git (reviewable, diffable)
- Notion response cache with `last_edited_time` for incremental builds
- Translation memory prevents re-translating unchanged content
- EN pages generated by 11ty from translated data (same templates as IT)

## Accumulated Context

### Decisions

- **v3.2-arch: same-pipeline** — EN pages generated from same 11ty pipeline as IT, not static HTML
- **v3.2-arch: offline-translation** — Translation is a separate `npm run translate` step, not part of every build
- **v3.2-arch: json-translations** — Translations stored as JSON files in git, read by EN data files at build time
- **v3.2-arch: notion-cache** — Cache Notion API responses locally with `last_edited_time` check for incremental builds

### Carried from v3.1

- Dizionario links need revision (deferred)
- Content validation pass (deferred)
- 3 unrecognized permits in DB (Tirocinio, Lavoro artistico, Sanatoria) — user to decide

## Session Continuity

**Last session:** 2026-02-17
**Stopped at:** Defining requirements for v3.2
**Resume file:** None

---

*This file is the single source of truth for project state. Update after every significant change.*
