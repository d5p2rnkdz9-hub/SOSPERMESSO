---
phase: 13-collabora-dropdown
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/pages/index.html
  - CLAUDE.md
  - .planning/codebase/INTEGRATIONS.md
autonomous: true

must_haves:
  truths:
    - "Collabora appears in index.html header navigation where Il progetto was"
    - "Clicking Collabora does NOT navigate (dropdown trigger only)"
    - "Hovering Collabora reveals dropdown with three items"
    - "Segnala un errore opens https://form.typeform.com/to/FsqvzdXI"
    - "Dai una mano opens https://form.typeform.com/to/USx16QN3"
    - "Il progetto in dropdown navigates to chi-siamo.html"
    - "No references to sospermesso.typeform.com/contatti remain in source code"
  artifacts:
    - path: "src/pages/index.html"
      provides: "Collabora dropdown in header navigation"
      contains: "Collabora"
    - path: "src/pages/index.html"
      provides: "Segnala un errore Typeform link"
      contains: "form.typeform.com/to/FsqvzdXI"
    - path: "src/pages/index.html"
      provides: "Dai una mano Typeform link"
      contains: "form.typeform.com/to/USx16QN3"
  key_links:
    - from: "src/pages/index.html"
      to: "chi-siamo.html"
      via: "Il progetto dropdown link"
      pattern: "dropdown-link.*chi-siamo\\.html"
    - from: "src/pages/index.html"
      to: "Typeform error form"
      via: "Segnala un errore link"
      pattern: "FsqvzdXI.*target=\"_blank\""
---

<objective>
Replace "Il progetto" nav item with "Collabora" dropdown in index.html header and clean up broken Typeform URL from documentation.

Purpose: Create the Collabora dropdown template that will be propagated to all pages in Phase 14, and remove broken URLs from codebase.

Output: index.html with working Collabora dropdown, documentation with correct Typeform URLs.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/13-collabora-dropdown/13-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Collabora dropdown to index.html header</name>
  <files>src/pages/index.html</files>
  <action>
Replace the "Il progetto" simple nav link (line 74):
```html
<li class="nav-item"><a href="chi-siamo.html" class="nav-link">Il progetto</a></li>
```

With the Collabora dropdown (following existing Database/Guide/Test pattern):
```html
<li class="nav-item has-dropdown">
  <a href="#collabora" class="nav-link" aria-haspopup="true" aria-expanded="false">Collabora</a>
  <ul class="nav-dropdown" role="menu">
    <li role="none"><a href="https://form.typeform.com/to/FsqvzdXI" class="dropdown-link" role="menuitem" target="_blank">Segnala un errore</a></li>
    <li role="none"><a href="https://form.typeform.com/to/USx16QN3" class="dropdown-link" role="menuitem" target="_blank">Dai una mano</a></li>
    <li role="none"><a href="chi-siamo.html" class="dropdown-link" role="menuitem">Il progetto</a></li>
  </ul>
</li>
```

Key points:
- href="#collabora" makes it non-navigating (matches existing Database/Guide/Test pattern)
- ARIA attributes match existing dropdowns
- External links have target="_blank"
- Internal chi-siamo.html link has no target attribute
- Item order: Segnala un errore, Dai una mano, Il progetto (per requirements)
  </action>
  <verify>
- Open src/pages/index.html in browser
- Verify "Collabora" appears in nav where "Il progetto" was
- Hover over "Collabora" - dropdown should appear with 3 items
- Click "Collabora" text - should NOT navigate anywhere
- Click "Segnala un errore" - should open Typeform in new tab
- Click "Dai una mano" - should open Typeform in new tab
- Click "Il progetto" - should navigate to chi-siamo.html
  </verify>
  <done>index.html header shows Collabora dropdown with all three items working correctly</done>
</task>

<task type="auto">
  <name>Task 2: Clean up broken Typeform URL in CLAUDE.md</name>
  <files>CLAUDE.md</files>
  <action>
Find the line referencing `sospermesso.typeform.com/contatti` in CLAUDE.md (approximately line 70).

Replace any reference to the broken URL with the correct contact form URL:
- OLD: `https://sospermesso.typeform.com/contatti`
- NEW: `https://form.typeform.com/to/USx16QN3`

Context: The old URL format is invalid. All Typeform URLs now use format `form.typeform.com/to/[form_id]`.
  </action>
  <verify>
Run: `grep -c "sospermesso.typeform.com/contatti" CLAUDE.md`
Should return: 0
  </verify>
  <done>CLAUDE.md contains no references to broken sospermesso.typeform.com/contatti URL</done>
</task>

<task type="auto">
  <name>Task 3: Update INTEGRATIONS.md Typeform documentation</name>
  <files>.planning/codebase/INTEGRATIONS.md</files>
  <action>
Update the Typeform section to:
1. Remove any reference to the broken `sospermesso.typeform.com/contatti` URL
2. Document the correct Typeform URLs currently in use:
   - Test "Posso AVERE": https://form.typeform.com/to/kt7P9Ejk
   - Test "Posso RINNOVARE": https://form.typeform.com/to/R7HY8nBp
   - Segnala un errore: https://form.typeform.com/to/FsqvzdXI
   - Dai una mano (Contact): https://form.typeform.com/to/USx16QN3

Note the URL pattern: `form.typeform.com/to/[form_id]` (NOT sospermesso.typeform.com).
  </action>
  <verify>
Run: `grep -c "sospermesso.typeform.com/contatti" .planning/codebase/INTEGRATIONS.md`
Should return: 0
  </verify>
  <done>INTEGRATIONS.md documents correct Typeform URLs with no broken references</done>
</task>

</tasks>

<verification>
After all tasks complete, run these verification commands:

```bash
# 1. Verify Collabora dropdown exists in index.html
grep -c "Collabora" src/pages/index.html
# Expected: at least 1

# 2. Verify new Typeform URLs present
grep -c "form.typeform.com/to/FsqvzdXI" src/pages/index.html
grep -c "form.typeform.com/to/USx16QN3" src/pages/index.html
# Expected: 1 each

# 3. Verify Il progetto is now a dropdown link, not nav-link
grep -c 'class="dropdown-link".*chi-siamo.html' src/pages/index.html
# Expected: 1

# 4. Verify broken URL removed from docs
grep -r "sospermesso.typeform.com/contatti" CLAUDE.md .planning/codebase/INTEGRATIONS.md
# Expected: no matches (empty output)
```
</verification>

<success_criteria>
1. index.html header shows "Collabora" dropdown instead of "Il progetto" link
2. Dropdown contains exactly 3 items: Segnala un errore, Dai una mano, Il progetto
3. External Typeform links open in new tabs
4. Internal chi-siamo.html link works
5. No broken sospermesso.typeform.com/contatti URLs in modified files
6. Existing CSS and JavaScript handle the new dropdown automatically (no code changes needed)
</success_criteria>

<output>
After completion, create `.planning/phases/13-collabora-dropdown/13-01-SUMMARY.md`
</output>
