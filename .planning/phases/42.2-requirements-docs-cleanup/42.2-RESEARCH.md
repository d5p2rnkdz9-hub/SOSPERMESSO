# Phase 42.2: Requirements & Docs Cleanup - Research

**Researched:** 2026-02-14
**Domain:** Requirements management, traceability documentation, phase verification
**Confidence:** HIGH

## Summary

This phase is about **documentation hygiene and completeness**, not technical implementation. The research confirms that Phase 42.2 involves applying established documentation patterns that already exist in this project to ensure all v3.1 milestone work is properly tracked and verified.

**Context:** Phase 42.1 fixed the prassi integration (all 81 document pages now include the prassi section). However, the documentation lags behind: Phase 41 lacks a VERIFICATION.md file, and REQUIREMENTS.md is missing 8 requirements (PRASSI, CONTENT, COSTI, VALID, DIZIO) that were added to the v3.1 roadmap after the initial DOC/PERM/BUILD requirements were defined.

**Primary recommendation:** Follow the existing verification and requirements documentation patterns established in Phases 39-42. This is a low-risk, high-value cleanup task with clear templates and precedents.

## Standard Stack

No libraries or technical stack involved. This phase uses existing project documentation formats.

### Core Documentation Files

| File | Purpose | Pattern Established |
|------|---------|-------------------|
| `.planning/REQUIREMENTS.md` | Formal requirements tracking with traceability matrix | Phase 39 (DOC-01..04), Phase 40 (PERM-01..04), Phase 42 (BUILD-01..04) |
| `.planning/phases/*/##-VERIFICATION.md` | Phase completion evidence and verification | 24 existing verification files from Phases 1-42.1 |
| `.planning/STATE.md` | Current project position and phase status | Updated after each phase completion |

### Supporting Documentation

| File | Purpose | When Updated |
|------|---------|--------------|
| `.planning/v3.1-MILESTONE-AUDIT.md` | Gap analysis for milestone | Created Phase 42-03, needs refresh after fix |
| `.planning/PROJECT.md` | Technical debt, shipped features, architecture | Updated with major changes |

## Architecture Patterns

### Requirements Documentation Structure (from REQUIREMENTS.md)

```markdown
# Requirements: SOS Permesso v3.1

**Defined:** [date]
**Core Value:** [user value statement]

## v3.1 Requirements

### [Category Name]

- [x] **[REQ-ID]**: [requirement description]
- [ ] **[REQ-ID]**: [requirement description]

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| [REQ-ID] | Phase ## | Complete/In Progress/Pending |
```

**Pattern observed:** Each requirement has:
1. Unique ID (category prefix + number, e.g., DOC-01, PERM-01)
2. Clear description (one line, actionable)
3. Checkbox for completion status
4. Traceability mapping to specific phase

### Verification Documentation Structure (from 39-VERIFICATION.md, 40-VERIFICATION.md, 42.1-VERIFICATION.md)

```markdown
---
phase: [phase-name]
verified: [ISO timestamp]
status: passed/failed
score: [X]/[Y] must-haves verified
re_verification: true/false
---

# Phase ##: [Name] Verification Report

**Phase Goal:** [goal statement]
**Verified:** [timestamp]
**Status:** [PASSED/FAILED]
**Re-verification:** [Yes/No - reason]

## Goal Achievement

### Observable Truths

| # | Truth | Status | Evidence |
|---|-------|--------|----------|
| 1 | [must-have truth] | ✓ VERIFIED | [specific evidence] |

**Score:** [X]/[Y] truths verified

### Requirements Coverage

| Requirement | Status | Supporting Infrastructure |
|-------------|--------|--------------------------|
| [REQ-ID] | ✓ SATISFIED | [what was built/verified] |

### Anti-Patterns Found

[None or list of issues with severity]

## Verification Details

[Technical verification evidence: file checks, build output, grep results]

## Human Verification Required

[Items that need manual testing in browser/production]

---

*Verified: [timestamp]*
*Verifier: Claude (gsd-verifier)*
```

**Pattern observed:**
- Frontmatter with metadata (phase, timestamp, status, score)
- Goal achievement section with observable truths table
- Requirements coverage mapping
- Anti-patterns check
- Detailed evidence (file existence, content checks, build output)
- Human verification section for non-programmatic checks

### Anti-Patterns to Avoid

- **Checkbox tracking without traceability:** Don't just mark requirements complete without linking to the phase that delivered them.
- **Verification without evidence:** Every "✓ VERIFIED" must cite specific evidence (file exists, grep output, build log, etc.).
- **Missing re-verification flag:** When a phase is verified after a fix, mark `re_verification: true` and explain what was fixed.
- **Orphaned requirements:** Every requirement in the roadmap must appear in REQUIREMENTS.md with traceability.

## Don't Hand-Roll

| Problem | Don't Build | Use Instead | Why |
|---------|-------------|-------------|-----|
| Requirements tracking | Custom database or spreadsheet | REQUIREMENTS.md markdown | Already established pattern, git-tracked, reviewable in PRs |
| Verification evidence | Manual notes or screenshots | Bash commands with output capture | Reproducible, automatable, version-controlled |
| Phase status tracking | External project management tool | STATE.md + phase directories | Single source of truth in repo |
| Traceability matrix | Excel/Sheets | Markdown tables in REQUIREMENTS.md | Lightweight, grep-able, diff-friendly |

**Key insight:** This project already has well-established documentation patterns. Don't invent new formats — follow existing precedents from Phases 39-42.1.

## Common Pitfalls

### Pitfall 1: Incomplete Traceability Matrix

**What goes wrong:** Requirements are added to categories but the traceability table at the bottom is not updated.

**Why it happens:** REQUIREMENTS.md has two sections (requirements list + traceability table). Easy to update one and forget the other.

**How to avoid:**
- For each requirement added, immediately add a row to the traceability table
- Run verification: `grep "PRASSI-0[1-4]" .planning/REQUIREMENTS.md` should return 8 lines (4 in requirements section, 4 in traceability table)

**Warning signs:** Requirement ID appears in file but not in traceability table.

### Pitfall 2: Missing Verification File After Phase Completion

**What goes wrong:** Phase has PLAN files and SUMMARY files but no VERIFICATION.md, leaving no formal evidence that the phase achieved its goals.

**Why it happens:** Phase 41 had 4 plans (01-04). Plan 04 was for human visual verification but was never executed (prassi integration was broken at build time).

**How to avoid:**
- After fix is applied (Phase 42.1), generate the missing verification retroactively
- Use the now-working build output as evidence
- Mark `re_verification: false` since this is the first verification (broken state was never formally verified)

**Warning signs:** Phase marked "Complete" in STATE.md but no VERIFICATION.md file exists.

### Pitfall 3: Requirements Scope Creep in Documentation

**What goes wrong:** Adding requirements to REQUIREMENTS.md that aren't actually part of the current milestone scope.

**Why it happens:** Confusion between "nice to have" and "must have" for milestone.

**How to avoid:**
- Cross-reference with `.planning/STATE.md` v3.1 Phases table
- Only add requirements explicitly tied to Phases 43-46 (listed in STATE.md)
- CONTENT-01..02 (Phase 43), COSTI-01..02 (Phase 44), VALID-01..02 (Phase 45), DIZIO-01..02 (Phase 46)

**Warning signs:** Requirement added with no corresponding phase in STATE.md.

### Pitfall 4: Verification Without Build Evidence

**What goes wrong:** Marking things as verified without capturing actual build output, file checks, or grep results.

**Why it happens:** Assuming that because code exists, it works. Phase 41 is a cautionary tale: all code existed but wasn't wired into output.

**How to avoid:**
- Run actual verification commands: `npm run build`, `grep -l "prassi-section" _site/src/pages/documenti-*-primo.html | wc -l`
- Include command output in verification document
- For Phase 41 retroactive verification, use the post-fix (Phase 42.1) build output

**Warning signs:** Verification document with no bash commands or file inspection evidence.

## Code Examples

### Adding Requirements to REQUIREMENTS.md

```markdown
### Prassi Locali

- [x] **PRASSI-01**: Submission form on document pages sends data via Netlify Function to Notion DB
- [x] **PRASSI-02**: "Prassi locali" section on document pages displays approved notes, filterable by city
- [x] **PRASSI-03**: Upvote/downvote system (anonymous, localStorage + IP rate limiting)
- [x] **PRASSI-04**: Manual moderation workflow (approve in Notion, rebuild to publish)

### Content Population

- [ ] **CONTENT-01**: All placeholder permit pages populated with Q&A content from Notion
- [ ] **CONTENT-02**: All permits have document requirement lists (no "Contenuto in arrivo" cards)

### Costi Section

- [ ] **COSTI-01**: Costi section added to permit page template with standard cost info
- [ ] **COSTI-02**: Cost data sourced from Notion or structured data file

### Content Validation

- [ ] **VALID-01**: Content audit findings (28 issues) resolved in Notion
- [ ] **VALID-02**: Automated content quality checks run during build

### Dizionario Integration

- [ ] **DIZIO-01**: Dizionario link coverage expanded (all key terms linked)
- [ ] **DIZIO-02**: Link accuracy verified (no broken/incorrect links)
```

### Updating Traceability Table

```markdown
## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| DOC-01 | Phase 39 | Complete |
| DOC-02 | Phase 39 | Complete |
| DOC-03 | Phase 39 | Complete |
| DOC-04 | Phase 39 | Complete |
| PERM-01 | Phase 40 | Complete |
| PERM-02 | Phase 40 | Complete |
| PERM-03 | Phase 40 | Complete |
| PERM-04 | Phase 40 | Complete |
| BUILD-01 | Phase 42 | Complete |
| BUILD-02 | Phase 42 | Complete |
| BUILD-03 | Phase 42 | Complete |
| BUILD-04 | Phase 42 | Complete |
| PRASSI-01 | Phase 41 + 42.1 | Complete |
| PRASSI-02 | Phase 41 + 42.1 | Complete |
| PRASSI-03 | Phase 41 + 42.1 | Complete |
| PRASSI-04 | Phase 41 + 42.1 | Complete |
| CONTENT-01 | Phase 43 | Pending |
| CONTENT-02 | Phase 43 | Pending |
| COSTI-01 | Phase 44 | Pending |
| COSTI-02 | Phase 44 | Pending |
| VALID-01 | Phase 45 | Pending |
| VALID-02 | Phase 45 | Pending |
| DIZIO-01 | Phase 46 | Pending |
| DIZIO-02 | Phase 46 | Pending |

**Coverage:**
- v3.1 requirements: 20 total
- Mapped to phases: 20
- Unmapped: 0 ✓
```

### Verification Commands for Phase 41 (Retroactive)

```bash
# Build verification
npm run build
# Should complete without errors

# Prassi CSS linked in head
grep -l "prassi.css" _site/src/pages/documenti-*-primo.html | wc -l
# Should match number of content pages (43)

# Prassi section present in body
grep -l 'class="section prassi-section"' _site/src/pages/documenti-*-primo.html | wc -l
# Should match number of content pages (43)

# Prassi JS script included before </body>
grep -l "prassi.js" _site/src/pages/documenti-*-primo.html | wc -l
# Should match number of content pages (43)

# Data file returns correct structure
node -e "const p = require('./_data/prassiLocali.js'); p().then(r => console.log('Keys:', Object.keys(r).length, 'slugs'));"
# Should show number of slugs with approved prassi entries

# Netlify functions exist
ls netlify/functions/submit-prassi.mjs netlify/functions/vote-prassi.mjs
# Should list both files

# Sample page inspection
cat _site/src/pages/documenti-richiesta-asilo-primo.html | grep -A 5 "prassi-section"
# Should show section HTML
```

## State of the Art

| Old Approach | Current Approach | When Changed | Impact |
|--------------|------------------|--------------|--------|
| Manual requirements tracking in Notion/Jira | Markdown REQUIREMENTS.md in repo | Phase 39 (v3.1 start) | Version-controlled, reviewable in PRs, grep-able |
| Verification by manual testing only | Automated verification with evidence capture | Phase 35-40 | Reproducible, faster, CI-ready |
| Phase documentation scattered | Structured phase directories with PLAN/SUMMARY/VERIFICATION | Phase 1 (v2.2 start) | Consistent, discoverable, auditable |
| Requirements→Phase mapping in head | Formal traceability matrix | Phase 39 | Orphan detection, coverage metrics |

**Deprecated/outdated:**
- External project management tools for requirement tracking (Notion "CHI FA COSA" is for task assignment, not formal requirements)
- Screenshot-based verification evidence (bash commands with output are now standard)
- "Trust me it works" verification (formal evidence capture is now required)

## Open Questions

Things that couldn't be fully resolved:

1. **PRASSI-01..04 requirement definitions**
   - What we know: Phase 41 research and plan docs describe the prassi feature in detail
   - What's unclear: Exact one-line requirement descriptions for REQUIREMENTS.md (need to distill from multi-page plans)
   - Recommendation: Extract requirement descriptions from `.planning/phases/41-prassi-locali-mvp/41-RESEARCH.md` success criteria section

2. **CONTENT/COSTI/VALID/DIZIO requirement definitions**
   - What we know: Phases 43-46 are listed in STATE.md with brief descriptions
   - What's unclear: Formal requirement IDs and descriptions (phases not yet planned)
   - Recommendation: Define lightweight requirements based on phase names/goals from STATE.md. Detailed requirements will be refined when each phase is researched/planned.

3. **Phase 41 verification scope**
   - What we know: Phase 42.1 fixed the integration; prassi now works on all 81 document pages
   - What's unclear: Should Phase 41 verification verify the broken state or the fixed state?
   - Recommendation: Verify the fixed state (post-42.1), mark as "first verification" not "re-verification" since broken state was never formally verified. Note in verification doc that integration was fixed in Phase 42.1.

## Sources

### Primary (HIGH confidence)

Industry standards for requirements management and verification:
- [ISO/IEC/IEEE 29148:2018](https://www.iso.org/standard/72089.html) - Requirements engineering standard (defines requirements processes, information items, and documentation formats)
- [ISO/IEC/IEEE 15289:2019](https://www.iso.org/standard/74909.html) - Content of life-cycle information items (documentation standards)

### Secondary (MEDIUM confidence)

Best practices and guidance:
- [Requirements Traceability Matrix Guide - TestRail](https://www.testrail.com/blog/requirements-traceability-matrix/)
- [RTM Best Practices - GeeksforGeeks](https://www.geeksforgeeks.org/software-testing/requirement-traceability-matrix/)
- [Maintaining RTM in Agile - Ketryx](https://www.ketryx.com/blog/best-practices-for-maintaining-a-requirement-traceability-matrix-in-agile)
- [Software Requirements Specification - TechTarget](https://www.techtarget.com/searchsoftwarequality/answer/Software-requirements-specification-and-the-IEEE-standard)
- [Project Completion Criteria - StarAgile](https://staragile.com/blog/what-is-project-completion)
- [Acceptance Criteria - ProjectManager](https://www.projectmanager.com/blog/acceptance-criteria-project-management)
- [SDLC Verification Phase - Cypress Data Defense](https://www.cypressdatadefense.com/secure-software-development-life-cycle/secure-sdlc-verification-testing-phase/)

### Tertiary (LOW confidence)

- [How to write requirements in Jira 2026 - Atlassian Community](https://community.atlassian.com/forums/App-Central-articles/How-to-write-requirements-in-Jira-Guide-for-2026/ba-p/3189425) - Tool-specific guidance

### Project-Specific (HIGH confidence - internal)

Existing documentation patterns from this project:
- `.planning/REQUIREMENTS.md` - Current requirements file (12 requirements tracked)
- `.planning/phases/39-document-pages/39-VERIFICATION.md` - Complete verification example (8/8 truths, detailed evidence)
- `.planning/phases/40-permit-pages/40-VERIFICATION.md` - Verification with re-verification example
- `.planning/phases/42.1-fix-prassi-integration/42.1-VERIFICATION.md` - Recent verification example (5/5 truths, build evidence)
- `.planning/STATE.md` - v3.1 phase roadmap with requirements per phase

## Metadata

**Confidence breakdown:**
- Requirements documentation pattern: HIGH - 24 existing examples in this project, follows ISO/IEC/IEEE 29148 principles
- Verification documentation pattern: HIGH - 24 existing VERIFICATION.md files, consistent structure
- Traceability matrix format: HIGH - Established in Phase 39, follows industry best practices
- Requirement ID format: HIGH - Consistent pattern (category-##) across DOC/PERM/BUILD requirements

**Research date:** 2026-02-14
**Valid until:** 90 days (documentation patterns are stable)

## Sources

- [ISO/IEC/IEEE 29148:2018 - Requirements engineering standard](https://www.iso.org/standard/72089.html)
- [ISO/IEC/IEEE 15289:2019 - Documentation standards](https://www.iso.org/standard/74909.html)
- [Requirements Traceability Matrix Guide - TestRail](https://www.testrail.com/blog/requirements-traceability-matrix/)
- [RTM Best Practices - GeeksforGeeks](https://www.geeksforgeeks.org/software-testing/requirement-traceability-matrix/)
- [Maintaining RTM in Agile - Ketryx](https://www.ketryx.com/blog/best-practices-for-maintaining-a-requirement-traceability-matrix-in-agile)
- [Software Requirements Specification - TechTarget](https://www.techtarget.com/searchsoftwarequality/answer/Software-requirements-specification-and-the-IEEE-standard)
- [Project Completion Criteria - StarAgile](https://staragile.com/blog/what-is-project-completion)
- [Acceptance Criteria - ProjectManager](https://www.projectmanager.com/blog/acceptance-criteria-project-management)
- [SDLC Verification Phase - Cypress Data Defense](https://www.cypressdatadefense.com/secure-software-development-life-cycle/secure-sdlc-verification-testing-phase/)
- [How to write requirements in Jira 2026 - Atlassian Community](https://community.atlassian.com/forums/App-Central-articles/How-to-write-requirements-in-Jira-Guide-for-2026/ba-p/3189425)
