---
phase: 01-page-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/pages/documenti-questura.html
autonomous: false

must_haves:
  truths:
    - "User sees 4 color-coded category sections (purple, orange, blue, teal) on documenti-questura page"
    - "User sees all 23 permits from database.html organized in same categories"
    - "User sees inline [Primo] [Rinnovo] badges next to each permit name"
    - "User can click badges and browser navigates to document page URLs"
    - "User sees distinct hover states on badges"
  artifacts:
    - path: "src/pages/documenti-questura.html"
      provides: "Restructured page with category sections and badge navigation"
      contains: ["category-section", "doc-badge", "badge-primo", "badge-rinnovo"]
  key_links:
    - from: "src/pages/documenti-questura.html"
      to: "documenti-*-primo.html"
      via: "badge anchor href"
      pattern: 'href="documenti-.*-primo.html"'
    - from: "src/pages/documenti-questura.html"
      to: "documenti-*-rinnovo.html"
      via: "badge anchor href"
      pattern: 'href="documenti-.*-rinnovo.html"'
---

<objective>
Restructure the documenti-questura page to use database.html's category section layout with inline clickable badges for "Primo" (first release) and "Rinnovo" (renewal) document types for all 23 permit types.

Purpose: Enable users to quickly find and navigate to document requirements for their specific permit type, with clear visual organization matching the database page they're already familiar with.

Output: A fully restructured documenti-questura.html with 4 category sections, 23 permit rows, and 46 clickable badges (one Primo + one Rinnovo per permit).
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-page-foundation/01-RESEARCH.md

# Reference files for patterns
@src/pages/database.html
@src/styles/main.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Badge CSS and Restructure Page</name>
  <files>src/pages/documenti-questura.html</files>
  <action>
Completely rewrite documenti-questura.html to match database.html's structure:

1. **Copy the inline `<style>` block from database.html** that contains:
   - `.permit-list` styles
   - `.permit-link` styles (but we'll adapt to `.permit-link-wrapper`)
   - `.category-section` and `.category-title` styles
   - `.database-container` styles

2. **Add NEW badge-specific CSS** (add to the same `<style>` block):
```css
/* Badge component - compact pill style */
.doc-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.35rem 0.75rem;
  font-size: 0.8rem;
  font-weight: 600;
  border-radius: 12px;
  text-decoration: none;
  transition: all 0.15s ease;
  white-space: nowrap;
}

.badge-primo {
  background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%);
  color: #0D47A1;
  border: 1.5px solid #64B5F6;
}

.badge-rinnovo {
  background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%);
  color: #E65100;
  border: 1.5px solid #FFB74D;
}

.doc-badge:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
}

.doc-badge:active {
  transform: translateY(0) scale(0.98);
}

/* Wrapper for permit row with badges */
.permit-link-wrapper {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.75rem 1rem;
  border-radius: 6px;
  transition: background-color 0.15s ease;
}

.permit-link-wrapper:hover {
  background-color: rgba(0, 0, 0, 0.04);
}

.permit-info {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.permit-info .icon {
  font-size: 1.25rem;
  flex-shrink: 0;
}

.permit-info .title {
  font-weight: 500;
  color: var(--black);
}

.badge-group {
  display: flex;
  gap: 0.5rem;
}

/* Mobile: Ensure touch targets, allow wrapping */
@media (max-width: 768px) {
  .permit-link-wrapper {
    flex-wrap: wrap;
    gap: 0.75rem;
    padding: 0.875rem 0.75rem;
  }

  .permit-info .title {
    font-size: 0.95rem;
  }

  .badge-group {
    flex-basis: 100%;
    justify-content: flex-start;
  }

  .doc-badge {
    min-width: 44px;
    min-height: 44px;
    padding: 0.5rem 1rem;
  }
}
```

3. **Replace page content** with category sections containing ALL 23 permits from database.html:

**STUDIO/LAVORO (category-purple):**
- ğŸ“– Permesso per studio â†’ documenti-studio-primo.html, documenti-studio-rinnovo.html
- ğŸ’¼ Lavoro subordinato â†’ documenti-lavoro-subordinato-primo.html, documenti-lavoro-subordinato-rinnovo.html
- ğŸ¢ Lavoro autonomo â†’ documenti-lavoro-autonomo-primo.html, documenti-lavoro-autonomo-rinnovo.html
- ğŸ‡ªğŸ‡º UE lungo periodo â†’ documenti-ue-lungo-periodo-primo.html, documenti-ue-lungo-periodo-rinnovo.html
- ğŸ” Attesa occupazione â†’ documenti-attesa-occupazione-primo.html, documenti-attesa-occupazione-rinnovo.html

**PROTEZIONE (category-orange):**
- ğŸŸ¨ Richiesta asilo â†’ documenti-richiesta-asilo-primo.html, documenti-richiesta-asilo-rinnovo.html
- ğŸ† Asilo politico â†’ documenti-asilo-politico-primo.html, documenti-asilo-politico-rinnovo.html
- ğŸ”° Protezione sussidiaria â†’ documenti-protezione-sussidiaria-primo.html, documenti-protezione-sussidiaria-rinnovo.html
- âš¡ Protezione speciale â†’ documenti-protezione-speciale-primo.html, documenti-protezione-speciale-rinnovo.html
- ğŸ‘¶ Minore etÃ  â†’ documenti-minore-eta-primo.html, documenti-minore-eta-rinnovo.html
- ğŸŒ‹ CalamitÃ  naturale â†’ documenti-calamita-naturale-primo.html, documenti-calamita-naturale-rinnovo.html
- ğŸ“„ Prosieguo amministrativo â†’ documenti-prosieguo-amministrativo-primo.html, documenti-prosieguo-amministrativo-rinnovo.html

**CURE MEDICHE (category-blue):**
- ğŸ¤° Gravidanza â†’ documenti-gravidanza-primo.html, documenti-gravidanza-rinnovo.html
- ğŸ’Š Cure mediche â†’ documenti-cure-mediche-primo.html, documenti-cure-mediche-rinnovo.html
- ğŸ¥ Gravi motivi salute â†’ documenti-gravi-motivi-salute-primo.html, documenti-gravi-motivi-salute-rinnovo.html

**MOTIVI FAMILIARI (category-teal):**
- ğŸ§‘â€ğŸ¤â€ğŸ§‘ Ricongiungimento familiare â†’ documenti-ricongiungimento-familiare-primo.html, documenti-ricongiungimento-familiare-rinnovo.html
- ğŸ’‘ Coesione familiare â†’ documenti-coesione-familiare-primo.html, documenti-coesione-familiare-rinnovo.html
- ğŸ‡®ğŸ‡¹ Genitore minore italiano â†’ documenti-genitore-minore-italiano-primo.html, documenti-genitore-minore-italiano-rinnovo.html
- ğŸ‘µ Conviventi familiari italiani â†’ documenti-conviventi-familiari-italiani-primo.html, documenti-conviventi-familiari-italiani-rinnovo.html
- ğŸ§’ Assistenza minore â†’ documenti-assistenza-minore-primo.html, documenti-assistenza-minore-rinnovo.html
- ğŸ‘¦ Minori stranieri affidati â†’ documenti-minori-stranieri-affidati-primo.html, documenti-minori-stranieri-affidati-rinnovo.html
- ğŸ‡ªğŸ‡º Carta soggiorno familiare UE â†’ documenti-carta-soggiorno-familiare-ue-primo.html, documenti-carta-soggiorno-familiare-ue-rinnovo.html
- ğŸš€ Carta soggiorno familiare italiano â†’ documenti-carta-soggiorno-familiare-italiano-primo.html, documenti-carta-soggiorno-familiare-italiano-rinnovo.html

4. **HTML structure for each permit row** (NOT nested anchor links):
```html
<li>
  <div class="permit-link-wrapper">
    <div class="permit-info">
      <span class="icon">ğŸ“–</span>
      <span class="title">Permesso per studio</span>
    </div>
    <div class="badge-group">
      <a href="documenti-studio-primo.html" class="doc-badge badge-primo">Primo</a>
      <a href="documenti-studio-rinnovo.html" class="doc-badge badge-rinnovo">Rinnovo</a>
    </div>
  </div>
</li>
```

5. **Keep existing page elements:**
- Header (same as database.html)
- Breadcrumb navigation
- Page title and subtitle (update to match purpose)
- Footer
- "Potrebbero interessarti anche" section

6. **Update page title/subtitle:**
- Title: "Documenti per la Questura"
- Subtitle: "Clicca su Primo o Rinnovo per vedere i documenti necessari"

7. **Keep the warning alert** about documents varying by Questura
  </action>
  <verify>
Run programmatic verification (all must pass):
```bash
# Badge counts (23 each)
grep -c 'badge-primo' src/pages/documenti-questura.html  # Expected: 23
grep -c 'badge-rinnovo' src/pages/documenti-questura.html  # Expected: 23

# Category sections (4 total)
grep -c 'category-section category-' src/pages/documenti-questura.html  # Expected: 4

# Permit rows (23 total)
grep -c 'permit-link-wrapper' src/pages/documenti-questura.html  # Expected: 23

# Category distribution check
grep -c 'category-purple' src/pages/documenti-questura.html  # Expected: 1
grep -c 'category-orange' src/pages/documenti-questura.html  # Expected: 1
grep -c 'category-blue' src/pages/documenti-questura.html  # Expected: 1
grep -c 'category-teal' src/pages/documenti-questura.html  # Expected: 1
```

Then open src/pages/documenti-questura.html in browser to visually verify:
1. Page displays 4 color-coded category sections
2. All 23 permits visible in correct categories
3. Each permit has 2 badges (Primo, Rinnovo) inline
4. Badges have distinct colors (blue for Primo, orange for Rinnovo)
5. Badges show hover effect (lift + shadow)
6. Click badge navigates to document page URL (404 expected for now)
7. Mobile view: badges wrap below permit name, remain tappable
  </verify>
  <done>
- documenti-questura.html restructured with database.html category pattern
- 4 category sections with correct colors (purple, orange, blue, teal)
- 23 permit rows with icons and titles
- 46 badges (Primo + Rinnovo for each permit)
- Badge hover states working
- Mobile-responsive layout with touch-friendly badges
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Restructured documenti-questura page with:
- 4 color-coded category sections matching database.html
- All 23 permits from database.html
- Inline clickable [Primo] [Rinnovo] badges for each permit
- Mobile-responsive layout with proper touch targets
  </what-built>
  <how-to-verify>
1. Open file in browser: `file:///Users/albertopasquero/Desktop/TECH/SOSpermesso/Sito_Nuovo/src/pages/documenti-questura.html`
2. Verify 4 category sections visible with correct colors:
   - Purple: STUDIO/LAVORO (5 permits)
   - Orange: PROTEZIONE (7 permits)
   - Blue: CURE MEDICHE (3 permits)
   - Teal: MOTIVI FAMILIARI (8 permits)
3. Count permits: should be 23 total
4. Hover over any badge - should lift slightly with shadow
5. Click any badge - should attempt to navigate (404 is OK, URL should be like `documenti-studio-primo.html`)
6. Resize browser to mobile width (~375px):
   - Badges should wrap below permit name
   - Badges should be large enough to tap (44x44px min)
7. Compare layout with database.html - should have similar visual structure
  </how-to-verify>
  <resume-signal>Type "approved" to proceed to Phase 2, or describe any issues that need fixing</resume-signal>
</task>

</tasks>

<verification>
Phase 1 requirements coverage:
- PAGE-01: Category section layout from database.html - VERIFIED by same CSS structure
- PAGE-02: 4 color-coded categories - VERIFIED by category-purple/orange/blue/teal classes
- PAGE-03: Icon + title + badges per row - VERIFIED by permit-link-wrapper structure
- BADGE-01: Clickable badges - VERIFIED by anchor tag badges
- BADGE-02: Distinct styling - VERIFIED by badge-primo/badge-rinnovo CSS
- BADGE-03: Badge availability - VERIFIED by all permits having both badges
</verification>

<success_criteria>
1. documenti-questura.html uses category-section layout matching database.html
2. Page displays 4 color-coded categories (purple, orange, blue, teal)
3. All 23 permits from database.html are present in correct categories
4. Each permit row shows icon + title + [Primo] + [Rinnovo] badges
5. Badges are clickable anchor links to document pages
6. Badges have distinct gradient styling and hover effects
7. Mobile view shows proper touch targets (44x44px minimum)
8. Human verification confirms visual/functional correctness
</success_criteria>

<output>
After completion, create `.planning/phases/01-page-foundation/01-01-SUMMARY.md` documenting:
- Files modified
- Requirements satisfied (PAGE-01 through BADGE-03)
- Badge URL pattern for Phase 2 reference
- Any deviations or decisions made during execution
</output>
