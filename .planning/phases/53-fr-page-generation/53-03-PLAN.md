---
phase: 53-fr-page-generation
plan: 03
type: execute
wave: 2
depends_on: ["53-01", "53-02"]
files_modified:
  - fr/index.html
  - fr/src/pages/database.html
  - fr/src/pages/documenti-questura.html
  - fr/src/pages/chi-siamo.html
autonomous: false

must_haves:
  truths:
    - "FR homepage exists at /fr/ with French content and working links"
    - "FR database listing exists at /fr/database.html with all permit links pointing to /fr/ paths"
    - "FR documenti-questura exists at /fr/documenti-questura.html with all document links"
    - "FR chi-siamo page exists at /fr/chi-siamo.html"
    - "Build produces fr/permesso-*.html for all 43 permits"
    - "Build produces fr/documenti-*-primo.html and fr/documenti-*-rinnovo.html"
    - "No DuplicatePermalinkOutputError during build"
  artifacts:
    - path: "fr/index.html"
      provides: "FR homepage"
      contains: "lang: fr"
    - path: "fr/src/pages/database.html"
      provides: "FR permit database listing"
      contains: "lang: fr"
    - path: "fr/src/pages/documenti-questura.html"
      provides: "FR document listing"
      contains: "lang: fr"
    - path: "fr/src/pages/chi-siamo.html"
      provides: "FR about page"
      contains: "lang: fr"
  key_links:
    - from: "fr/index.html"
      to: "fr/src/pages/database.html"
      via: "relative href"
      pattern: "database.html"
    - from: "fr/src/pages/database.html"
      to: "fr/permesso-*.html"
      via: "relative href"
      pattern: "permesso-"
    - from: "fr/src/pages/documenti-questura.html"
      to: "fr/documenti-*-primo.html"
      via: "relative href"
      pattern: "documenti-.*-primo.html"
---

<objective>
Create FR static pages (homepage, database listing, documenti-questura, chi-siamo) by copying EN equivalents and editing en->fr, then run a full build to verify everything works end-to-end.

Purpose: These are the 4 required static pages for FGEN-03. The build verification confirms all 3 requirements (FGEN-01, FGEN-02, FGEN-03) are met.
Output: 4 new FR static pages + verified build output
</objective>

<execution_context>
@/Users/albertopasquero/.claude/get-shit-done/workflows/execute-plan.md
@/Users/albertopasquero/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/ROADMAP.md
@.planning/phases/53-fr-page-generation/53-RESEARCH.md
@.planning/phases/53-fr-page-generation/53-01-SUMMARY.md
@.planning/phases/53-fr-page-generation/53-02-SUMMARY.md
@en/index.html
@en/src/pages/database.html
@en/src/pages/documenti-questura.html
@en/src/pages/chi-siamo.html
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create FR static pages by copying EN and editing</name>
  <files>fr/index.html, fr/src/pages/database.html, fr/src/pages/documenti-questura.html, fr/src/pages/chi-siamo.html</files>
  <action>
**APPROACH: Copy each EN file, then make targeted en->fr edits. Structure must remain identical.**

**File 1: `fr/index.html`** — Copy from `en/index.html`. Edits:
- Front matter `lang: en` -> `lang: fr`
- Front matter `title:` -> `title: "S.O.S.Permesso - Votre guide des permis de séjour en Italie"`
- Front matter `description:` -> `description: "SOS Permesso - Guide complet des permis de séjour en Italie"`
- Hero title: `Your Guide to <span class="nowrap">Residence Permits.</span>` -> `Votre guide des <span class="nowrap">permis de séjour.</span>`
- Hero tagline: `<span class="hero-highlight">Easy.</span> Clear. Free.` -> `<span class="hero-highlight">Simple.</span> Clair. Gratuit.`
- Hero description: `Complete and up-to-date information on residence permits in Italy, to navigate bureaucracy without stress.` -> `Informations complètes et à jour sur les permis de séjour en Italie, pour naviguer la bureaucratie sans stress.`
- CTA button: `Explore Permits →` -> `Explorer les permis →`
- Badge: `23+ Permits` -> `23+ Permis`
- Section titles: `OUR TESTS` -> `NOS TESTS`, `OUR DATABASES` -> `NOS BASES DE DONNÉES`, `OUR GUIDES` -> `NOS GUIDES`, `USEFUL LINKS` -> `LIENS UTILES`
- Test cards: `Can I GET a permit?` -> `Puis-je OBTENIR un permis ?`, `Can I CONVERT my permit?` -> `Puis-je CONVERTIR mon permis ?`, `Can I RENEW my permit?` -> `Puis-je RENOUVELER mon permis ?`
- Test card descriptions: translate to French
- Test card buttons: `START THE TEST →` -> `COMMENCER LE TEST →`
- Database cards: `All permits` -> `Tous les permis`, `What documents to bring to the Police` -> `Quels documents apporter à la Questura`
- Database descriptions: translate to French
- Guide cards: `International protection` -> `Protection internationale`, `Family reunification` -> `Regroupement familial`, `Annual immigration quota decree` -> `Décret-flux annuel`, `Coming soon` -> `Bientôt`
- Guide descriptions: translate to French
- Useful links: `Free legal assistance near you` -> `Assistance juridique gratuite près de chez vous`, `Useful forms (postal kit and others)` -> `Formulaires utiles (kit postal et autres)`, `Check your permit` -> `Vérifier votre permis`, `Dictionary` -> `Dictionnaire`
- Useful link descriptions: translate to French
- CTA: `Didn't find the answer you were looking for?` -> `Vous n'avez pas trouvé la réponse que vous cherchiez ?`
- CTA button: `Contact us` -> `Contactez-nous`
- All internal `href` links stay as relative paths (same as EN): `database.html`, `documenti-questura.html`, `protezione-internazionale.html`, `ricongiungimento-familiare.html`, `decreto-flussi.html`, `aiuto-legale.html`, `kit-postale.html`, `controlla-permesso.html`, `dizionario.html`
- IMPORTANT: Asset paths from `fr/index.html` use `IMAGES/...` and `src/...` (NO `../` prefix — pages output at `/fr/` root level). Check the EN version — if EN uses `IMAGES/team checklist-rafiki.svg`, FR should use the same.
- IMPORTANT: The `fetch('src/components/contact-form.html')` path stays the same (relative from output root).

**File 2: `fr/src/pages/database.html`** — Copy from `en/src/pages/database.html`. Edits:
- Front matter `lang: en` -> `lang: fr`
- Front matter `title: "Residence Permits Database"` -> `title: "Base de données des permis de séjour"`
- Front matter `description:` -> `description: "Base de données complète des permis de séjour en Italie"`
- Page title: `All residence permits` -> `Tous les permis de séjour`
- Alert: `Want to know if you can get one of the permits below?` -> `Vous voulez savoir si vous pouvez obtenir un des permis ci-dessous ?`
- Alert link: `Take our test` -> `Faites notre test`
- Category headings: `STUDY/WORK` -> `ÉTUDES/TRAVAIL`, `PROTECTION (INTERNATIONAL OR SOCIAL)` -> `PROTECTION (INTERNATIONALE OU SOCIALE)`, `MEDICAL TREATMENT` -> `SOINS MÉDICAUX`, `FAMILY REASONS` -> `MOTIFS FAMILIAUX`
- ALL permit title text: translate each one to French (study permit, employed work, etc.)
- ALL `href` links: keep EXACTLY the same slugs (e.g., `permesso-studio-dopo-ingresso-con-visto.html`) — these are IT slugs used in all languages
- CTA: `Can't find the permit you're looking for?` -> `Vous ne trouvez pas le permis que vous cherchez ?`
- CTA button: `Contact us for help` -> `Contactez-nous pour obtenir de l'aide`

**File 3: `fr/src/pages/documenti-questura.html`** — Copy from `en/src/pages/documenti-questura.html`. Edits:
- Front matter `lang: en` -> `lang: fr`
- Front matter `title:` -> `title: "Quels documents apporter à la Questura"`
- Front matter `description:` -> `description: "Documents requis pour demander ou renouveler un permis de séjour à la Questura"`
- Breadcrumb: `>Home<` -> `>Accueil<`, `>What documents to bring to Police Headquarters (Questura)<` -> `>Quels documents apporter à la Questura<`
- Breadcrumb `href="index.html"` stays the same (relative)
- Page title: translate to French
- Subtitle: `Click on First or Renewal to see the required documents` -> `Cliquez sur Premier ou Renouvellement pour voir les documents requis`
- Intro paragraph: translate to French
- Warning note: translate to French (include Questura terminology)
- Category headings: same FR translations as database.html
- ALL permit title text: translate each one to French (same as database.html translations)
- ALL `href` links: keep EXACTLY the same document slugs
- Badge text: `First` -> `Premier`, `Renewal` -> `Renouvellement`
- Related section: `You might also be interested in` -> `Vous pourriez aussi être intéressé par`
- Related cards: `All permits` -> `Tous les permis`, `Postal kit` -> `Kit postal`, `Check permit status` -> `Vérifier l'état du permis`

**File 4: `fr/src/pages/chi-siamo.html`** — Read `en/src/pages/chi-siamo.html` first to understand its structure, then copy and translate:
- Front matter `lang: en` -> `lang: fr`
- Translate all visible text content to French
- Keep all href links the same (relative paths with IT slugs)
  </action>
  <verify>
1. `ls fr/index.html fr/src/pages/database.html fr/src/pages/documenti-questura.html fr/src/pages/chi-siamo.html` — all 4 exist
2. `grep "lang: fr" fr/index.html` returns a match
3. `grep "lang: fr" fr/src/pages/database.html` returns a match
4. `grep "lang: fr" fr/src/pages/documenti-questura.html` returns a match
5. `grep "lang: fr" fr/src/pages/chi-siamo.html` returns a match
6. `grep -c "/en/" fr/index.html` returns 0 (no leftover EN paths)
7. `grep "permesso-studio" fr/src/pages/database.html` returns matches (IT slugs preserved)
8. `grep "Premier" fr/src/pages/documenti-questura.html` returns matches (FR badge text)
  </verify>
  <done>All 4 FR static pages exist with `lang: fr`, French content, correct relative links (IT slugs), no leftover EN paths</done>
</task>

<task type="auto">
  <name>Task 2: Run full build and verify FR page output</name>
  <files>(none — verification only)</files>
  <action>
Run `npm run build` from the project root. This should:
1. Fetch Notion data (IT, EN, FR)
2. Run 11ty to generate all pages

After the build completes, verify:
1. Count FR permit pages: `ls _site/fr/permesso-*.html | wc -l` — expect 43 (or close)
2. Count FR document primo pages: `ls _site/fr/documenti-*-primo.html | wc -l` — expect matching EN count
3. Count FR document rinnovo pages: `ls _site/fr/documenti-*-rinnovo.html | wc -l` — expect matching EN count
4. Verify FR static pages exist: `ls _site/fr/index.html _site/fr/database.html _site/fr/documenti-questura.html _site/fr/chi-siamo.html`
5. Verify no DuplicatePermalinkOutputError in build output
6. Spot-check a FR permit page: `head -5 _site/fr/permesso-lavoro-subordinato-dopo-ingresso-con-visto-per-flussi.html` — should show `lang="fr"` in HTML tag
7. Spot-check a FR document page: `head -5 _site/fr/documenti-lavoro-subordinato-dopo-ingresso-con-visto-per-flussi-primo.html` — should show `lang="fr"`
8. Verify hreflang in a generated permit page: `grep "hreflang" _site/fr/permesso-lavoro-subordinato-dopo-ingresso-con-visto-per-flussi.html` — should show it, en, fr alternates
9. Compare EN counts: `ls _site/en/permesso-*.html | wc -l` and `ls _site/en/documenti-*-primo.html | wc -l` — FR counts should match

If the build fails, examine the error output. Common issues:
- `DuplicatePermalinkOutputError`: A static file conflicts with a pagination template. Check if the safety net in `eleventy.config.mjs` is working.
- `TemplateLayoutPathResolveError`: A page references a layout that doesn't exist. Check front matter.
- Data errors: `permitsFr` or `documentsFr` returning empty. Check if `NOTION_API_KEY` is set.

If the build succeeds but counts are wrong, check that `_data/permitsFr.js` and `_data/documentsFr.js` exist and return data.
  </action>
  <verify>
1. Build completes without `DuplicatePermalinkOutputError`
2. `ls _site/fr/permesso-*.html | wc -l` outputs approximately 43
3. `ls _site/fr/documenti-*-primo.html | wc -l` outputs a count matching EN
4. `ls _site/fr/index.html _site/fr/database.html _site/fr/documenti-questura.html _site/fr/chi-siamo.html` — all exist
5. `grep 'lang="fr"' _site/fr/permesso-lavoro-subordinato-dopo-ingresso-con-visto-per-flussi.html` returns a match
  </verify>
  <done>Build succeeds. FR permit pages, FR document pages (primo + rinnovo), and FR static pages all exist in `_site/fr/` with `lang="fr"` and correct hreflang tags.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete FR page generation pipeline: pagination templates, static pages, language infrastructure wiring, safety nets</what-built>
  <how-to-verify>
1. Start local dev server: `npx @11ty/eleventy --serve`
2. Visit `http://localhost:8080/fr/` — verify FR homepage loads with French text
3. Click "Explorer les permis" — should navigate to FR database listing
4. Click any permit in the listing — should show FR permit page with French Q&A content
5. On a permit page, click "Documents pour premier titre" — should show FR document primo page
6. Verify the document checklist has French labels ("Documents requis", "Cochez les documents...")
7. Test language switcher:
   - From FR page, click language switcher -> select IT -> should navigate to IT equivalent
   - From IT page, click language switcher -> select FR -> should navigate to FR equivalent
   - From EN page, click language switcher -> select FR -> should navigate to FR equivalent
8. Verify logo links to `/fr/` when on FR pages
9. Verify nav dropdown shows French labels (Base de données, Guides, Test, Collaborer)
  </how-to-verify>
  <resume-signal>Type "approved" or describe issues found</resume-signal>
</task>

</tasks>

<verification>
1. `_site/fr/` directory contains permit pages, document pages, and static pages
2. FR page counts match EN page counts
3. No build errors (especially no DuplicatePermalinkOutputError)
4. FR pages render with French UI strings and correct navigation
5. Language switcher works bidirectionally between IT, EN, and FR
</verification>

<success_criteria>
- Build produces `/fr/permesso-*.html` for all 43 permits (FGEN-01)
- Build produces `/fr/documenti-*-primo.html` and `/fr/documenti-*-rinnovo.html` for all document types (FGEN-02)
- FR static pages exist at `/fr/` (homepage, database listing, documenti-questura, chi-siamo) (FGEN-03)
- Language switcher navigates correctly between IT, EN, and FR
- No build errors
</success_criteria>

<output>
After completion, create `.planning/phases/53-fr-page-generation/53-03-SUMMARY.md`
</output>
