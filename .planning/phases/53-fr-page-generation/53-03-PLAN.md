---
phase: 53-fr-page-generation
plan: 03
type: execute
wave: 2
depends_on: ["53-01", "53-02"]
files_modified:
  - fr/index.html
  - fr/src/pages/database.html
  - fr/src/pages/documenti-questura.html
  - fr/src/pages/chi-siamo.html
autonomous: false

must_haves:
  truths:
    - "FR homepage accessible at /fr/ with French content"
    - "FR database listing shows all 43 permits with French category names"
    - "FR documenti-questura lists all permits with primo/rinnovo badges in French"
    - "FR chi-siamo page shows team info in French"
    - "Full build produces all FR pages without errors"
    - "Language switcher works correctly from any FR page"
    - "FR document pages (layout: false) render French navigation via header include"
  artifacts:
    - path: "fr/index.html"
      provides: "FR homepage"
      contains: "lang: fr"
    - path: "fr/src/pages/database.html"
      provides: "FR permit listing"
      contains: "lang: fr"
    - path: "fr/src/pages/documenti-questura.html"
      provides: "FR document listing"
      contains: "lang: fr"
    - path: "fr/src/pages/chi-siamo.html"
      provides: "FR about page"
      contains: "lang: fr"
  key_links:
    - from: "fr/src/pages/database.html"
      to: "fr/permesso-*.html"
      via: "relative href links"
      pattern: "permesso-.*\\.html"
    - from: "fr/src/pages/documenti-questura.html"
      to: "fr/documenti-*-primo.html"
      via: "relative href links"
      pattern: "documenti-.*-primo\\.html"
    - from: "fr/index.html"
      to: "fr/database.html"
      via: "relative href link"
      pattern: "database\\.html"
---

<objective>
Create the four FR static pages (homepage, database listing, documenti-questura listing, chi-siamo) and verify the complete build produces all expected FR output.

Purpose: These are the required static pages per FGEN-03. Without them, users have no entry point to the FR section and no way to browse permits/documents by category.
Output: 4 new FR static page files + successful full build verification
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/53-fr-page-generation/53-RESEARCH.md
@.planning/phases/53-fr-page-generation/53-01-SUMMARY.md
@.planning/phases/53-fr-page-generation/53-02-SUMMARY.md

Key source files to copy patterns from (EN versions):
@en/index.html
@en/src/pages/database.html
@en/src/pages/documenti-questura.html
@en/src/pages/chi-siamo.html
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create FR static pages (homepage, database, documenti-questura, chi-siamo)</name>
  <files>
    fr/index.html
    fr/src/pages/database.html
    fr/src/pages/documenti-questura.html
    fr/src/pages/chi-siamo.html
  </files>
  <action>
**1. Create `fr/index.html` -- FR homepage:**

Copy `en/index.html` and translate to French. Key changes:
- Front matter: `lang: en` -> `lang: fr`
- Front matter title: `"S.O.S.Permesso - Votre guide simple pour les titres de sejour en Italie"`
- Front matter description: `"SOS Permesso - Guide complete sur les titres de sejour en Italie"`
- Hero h1: `"Votre guide des titres de sejour."` with tagline `"Simple. Clair. Gratuit."`
- Hero description: `"Informations completes et a jour sur les titres de sejour en Italie, pour naviguer la bureaucratie sans stress."`
- CTA button: `"Explorer les permis"` linking to `database.html` (relative)
- Trust badges: `"23+ Permis"` and `"Mis a jour 31.12.2025"`
- Tests section title: `"NOS TESTS"`
- Test card titles: `"Puis-je OBTENIR un permis ?"`, `"Puis-je CONVERTIR mon permis ?"`, `"Puis-je RENOUVELER mon permis ?"`
- Test card descriptions and buttons: translate to French, button text `"COMMENCER LE TEST"`
- Database section title: `"NOS BASES DE DONNEES"`
- Database cards: `"Tous les permis"` / `"Documents pour la Questura"` with French descriptions, linking to `database.html` and `documenti-questura.html` (relative)
- Guides section title: `"NOS GUIDES"`
- Guide cards: `"Protection internationale"`, `"Regroupement familial"`, `"Decret annuel de flux migratoires"` (with "Bientot" banner)
- Useful links section title: `"LIENS UTILES"`
- Useful link cards: `"Aide juridique gratuite pres de chez vous"`, `"Formulaires utiles (kit postal et autres)"`, `"Verifier votre permis"`, `"Dictionnaire"` with French descriptions
- CTA section: `"Vous n'avez pas trouve la reponse ?"` with `"Contactez-nous"` button
- Contact form fetch: `fetch('src/components/contact-form.html')` -- note: from FR homepage this path is correct since pages output at /fr/ and assets are at root
- Asset paths: Use `IMAGES/...` for images (not `../IMAGES/` -- FR homepage outputs to `_site/fr/index.html` and assets are at `_site/IMAGES/`)

IMPORTANT: Asset paths from `fr/index.html`:
- Images: `IMAGES/team checklist-rafiki.svg` (relative, works because the page is at /fr/ and image is at /IMAGES/ root)
- Actually, check what EN does. EN uses `IMAGES/team checklist-rafiki.svg` without leading slash. This works because en/index.html outputs to `_site/en/index.html` and the relative path resolves to `_site/en/IMAGES/...` which doesn't exist. But looking at the EN source, it uses `IMAGES/team checklist-rafiki.svg` -- this likely works because there's a passthrough copy or the path resolves differently.
- To be safe, use absolute path: `/IMAGES/team checklist-rafiki.svg` with leading slash. This ensures it resolves to `_site/IMAGES/...` regardless of page depth.

**2. Create `fr/src/pages/database.html` -- FR permit listing:**

Copy `en/src/pages/database.html` and translate. Key changes:
- Front matter: `lang: en` -> `lang: fr`
- Front matter title: `"Base de donnees des titres de sejour"`
- Front matter description: `"Base de donnees complete des titres de sejour en Italie"`
- Page header: `"Tous les titres de sejour"`
- Info alert: `"Vous voulez savoir si vous pouvez obtenir un des permis ci-dessous ?"` with `"Faites notre test"` link
- Category titles: `"ETUDES/TRAVAIL"`, `"PROTECTION (INTERNATIONALE OU SOCIALE)"`, `"SOINS MEDICAUX"`, `"MOTIFS FAMILIAUX"`
- All permit titles: translate each title to French (keep IT slugs in href unchanged):
  - Study permit -> Permis d'etudes
  - Employed work -> Travail subordonne
  - Self-employment -> Travail autonome
  - EU long-term -> Permis UE pour sejour de longue duree ("Carte")
  - Job seeking -> Recherche d'emploi ("attente d'emploi")
  - Asylum application -> Demande d'asile ("permis jaune")
  - Refugee status -> Asile (statut de refugie)
  - Subsidiary protection -> Protection subsidiaire
  - Special protection -> Protection speciale (apres decision positive)
  - Minors -> Mineurs (mineurs etrangers non accompagnes)
  - Natural disaster -> Calamite naturelle
  - Administrative continuation -> Poursuite administrative (integration)
  - Pregnant woman -> Femme enceinte ou mere d'enfant de moins de 6 mois
  - Father -> Pere d'enfant de moins de 6 mois ou a naitre
  - Medical treatment after entry -> Soins medicaux apres entree avec visa
  - Seriously ill person -> Personne gravement malade deja en Italie (art. 19)
  - Family reunification -> Regroupement familial (apres entree avec visa)
  - Family cohesion -> Cohesion familiale (sans autorisation)
  - Parent of Italian citizen -> Parent de citoyen italien
  - Cohabitant with Italian relative -> Cohabitant avec parent italien jusqu'au deuxieme degre
  - Minor assistance -> Assistance de mineur (art. 31)
  - Foreign minors in custody -> Mineurs etrangers confies a des parents jusqu'au quatrieme degre
  - FAMIT -> FAMIT pour membres de la famille de citoyens italiens
  - Residence card EU -> Carte de sejour pour membre de famille de citoyen UE
  - Residence card mobile Italian -> Carte de sejour pour membre de famille d'italien "mobile"
- All href links: keep same IT slugs (e.g., `permesso-studio-dopo-ingresso-con-visto.html`) -- relative paths work because FR database outputs to `_site/fr/database.html` and FR permits output to `_site/fr/permesso-*.html`
- CTA section: `"Vous ne trouvez pas le permis que vous cherchez ?"` with `"Contactez-nous pour de l'aide"`

**3. Create `fr/src/pages/documenti-questura.html` -- FR document listing:**

Copy `en/src/pages/documenti-questura.html` and translate. Key changes:
- Front matter: `lang: en` -> `lang: fr`
- Front matter title: `"Documents a apporter a la Questura"`
- Front matter description: `"Documents requis pour demander ou renouveler un titre de sejour a la Questura"`
- Breadcrumb: `Home` -> `Accueil` (link to `index.html`)
- Page title: `"Documents a apporter a la Questura"`
- Subtitle: `"Cliquez sur Premier titre ou Renouvellement pour voir les documents requis"`
- Description paragraph: `"Vous trouverez ici la liste des documents a apporter a la Questura ou a inclure dans le kit postal."`
- Warning alert: translate to French
- Category titles: same French translations as database.html
- Permit titles: same French translations as database.html
- Badge text: `First` -> `1er titre`, `Renewal` -> `Renouvellement`
- All href links: keep same IT slugs with `documenti-...-primo.html` / `documenti-...-rinnovo.html` pattern (relative paths)
- Related links section: `"Cela pourrait aussi vous interesser"` with `"Tous les permis"`, `"Kit postal"`, `"Verifier le permis"`

**4. Create `fr/src/pages/chi-siamo.html` -- FR about page:**

Copy `en/src/pages/chi-siamo.html` and translate. Key changes:
- Front matter: `lang: en` -> `lang: fr`
- Front matter title: `"Qui sommes-nous"`
- Breadcrumb: `Home` -> `Accueil`, `About Us` -> `Qui sommes-nous`
- Page title: `"Qui sommes-nous"`
- Intro: `"Nous sommes des avocats et des travailleurs juridiques bases a Turin. Nous travaillons sur les droits des ressortissants etrangers en Italie. Beaucoup d'entre nous sont membres de l'ASGI (Association pour les etudes juridiques sur l'immigration)."`
- Team intro: `"S.O.S. Permesso a ete concu et cree par Alberto Pasquero, avocat et membre de l'ASGI, et a ete developpe avec l'aide de nombreuses personnes dont :"`
- Keep team member names as-is (proper nouns), translate titles:
  - `Lawyer` -> `Avocate`
  - `Legal worker` -> `Travailleuse juridique` / `Travailleur juridique`
  - `ASGI member` -> `membre de l'ASGI`
- CTA: `"Vous voulez aider ?"` with `"Collaborer avec nous"` button
  </action>
  <verify>
1. All 4 FR static pages exist with `lang: fr` in front matter
2. No `/en/` paths in any FR static page (search for `/en/`)
3. All permit slugs in database.html and documenti-questura.html match exactly the IT slugs used in EN versions
4. Asset paths use root-relative (`/IMAGES/...`) or relative paths that resolve correctly from /fr/
5. Breadcrumb links use relative paths (`index.html`) not nested paths (`src/pages/index.html`)
  </verify>
  <done>
Four FR static pages exist: homepage at fr/index.html, database listing at fr/src/pages/database.html, document listing at fr/src/pages/documenti-questura.html, about page at fr/src/pages/chi-siamo.html. All have French content, correct slugs, and proper paths.
  </done>
</task>

<task type="auto">
  <name>Task 2: Full build verification</name>
  <files><!-- No files created or modified -- this task is verification only (clean build + output checks) --></files>
  <action>
Run the full build and verify all FR output:

1. Delete `_site/` to ensure clean build: `rm -rf _site`
2. Run `npm run build` (this fetches Notion data + runs 11ty)
3. After build completes, verify:
   - Count FR permit pages: `ls _site/fr/permesso-*.html | wc -l` (expect 43)
   - Count FR document primo pages: `ls _site/fr/documenti-*-primo.html | wc -l` (expect same as IT)
   - Count FR document rinnovo pages: `ls _site/fr/documenti-*-rinnovo.html | wc -l` (expect same as IT)
   - Verify FR static pages exist:
     - `_site/fr/index.html`
     - `_site/fr/database.html`
     - `_site/fr/documenti-questura.html`
     - `_site/fr/chi-siamo.html`
   - Verify NO DuplicatePermalinkOutputError in build output
   - Verify FR permit page content is not empty: `head -20 _site/fr/permesso-richiesta-asilo.html` should show French content
   - Verify FR document page has French UI strings: check `_site/fr/documenti-richiesta-asilo-primo.html` for "Documents requis"
   - Verify hreflang tags: check `_site/fr/database.html` for `hreflang="fr"` and `hreflang="it"` and `hreflang="en"`
   - Verify EN pages still build correctly: `ls _site/en/permesso-*.html | wc -l` (expect 43)
   - Verify IT pages still build correctly: `ls _site/permesso-*.html | wc -l` (expect 43)
   - Verify FR document pages render French nav: check `_site/fr/documenti-richiesta-asilo-primo.html` for French nav labels from nav.js (e.g., "Base de donnees" or "Tous les permis"). Note: FR document templates use `layout: false` but include `header.liquid` directly -- the `lang` variable must propagate via the front matter `lang: fr` in the FR document template. Confirm the built output contains French navigation text, not Italian/English.

4. If build fails, diagnose and fix. Common issues:
   - DuplicatePermalinkOutputError: check eleventy.config.mjs safety nets
   - Missing data: check _data/permitsFr.js and _data/documentsFr.js
   - Template syntax errors: check Liquid syntax in FR templates
  </action>
  <verify>
Build succeeds with zero errors. FR page counts match expectations. FR content is French (not English/Italian). Hreflang tags present. IT and EN pages unaffected. FR document pages (which use layout: false) render French navigation labels.
  </verify>
  <done>
Full build produces all FR pages (permits + documents + static), EN and IT pages still build correctly, no DuplicatePermalinkOutputError, French content renders correctly, FR document pages show French nav despite layout: false.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete FR page generation pipeline: 43 permit pages, ~90 document pages (primo + rinnovo), 4 static pages, language switcher support, hreflang tags</what-built>
  <how-to-verify>
1. Start local server: `npx @11ty/eleventy --serve` (or `npm run serve` if available)
2. Visit http://localhost:8080/fr/ -- verify FR homepage loads with French content
3. Click "Explorer les permis" button -- should go to FR database listing
4. Click any permit in the listing -- should open FR permit page with French Q&A content
5. On a FR permit page, click "Documents pour premier titre" -- should open FR document checklist
6. On the document page, check a few checkboxes -- refresh the page -- verify checkboxes persist
7. Click the language switcher -- verify it shows "FR" as current
8. Switch to IT -- verify you land on the same permit page in Italian
9. Switch back to FR from IT -- verify correct navigation
10. Switch from FR to EN -- verify correct navigation
  </how-to-verify>
  <resume-signal>Type "approved" or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
Phase 53 success criteria verification:
1. Build produces `/fr/permesso-*.html` for all 43 permits -- verified by page count
2. Build produces `/fr/documenti-*-primo.html` and `/fr/documenti-*-rinnovo.html` -- verified by page count
3. FR static pages exist at `/fr/` (homepage, database listing, documenti-questura, chi-siamo) -- verified by file existence
4. Language switcher on any IT/EN page shows FR option and navigates to the correct translated page -- verified by human testing
5. FR document pages (layout: false) render French nav labels -- verified by build output check
</verification>

<success_criteria>
- All 4 FR static pages render correctly with French content
- Full build completes without errors
- FR page counts match IT/EN page counts
- Language switching works bidirectionally between all three languages
- FR document pages show French navigation (not English/Italian)
- User confirms FR pages work correctly via checkpoint
</success_criteria>

<output>
After completion, create `.planning/phases/53-fr-page-generation/53-03-SUMMARY.md`
</output>
