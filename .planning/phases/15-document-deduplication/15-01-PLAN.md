---
phase: 15-document-deduplication
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/pages/permesso-studio.html
autonomous: true

must_haves:
  truths:
    - "permesso-studio.html shows two CTA buttons after page header"
    - "CTA buttons link to documenti-studio-primo.html and documenti-studio-rinnovo.html"
    - "No inline document lists remain in permesso-studio.html"
  artifacts:
    - path: "src/pages/permesso-studio.html"
      provides: "Template permit page with CTA pattern"
      contains: "Documenti per il primo rilascio"
  key_links:
    - from: "src/pages/permesso-studio.html"
      to: "documenti-studio-primo.html"
      via: "CTA button href"
      pattern: 'href="documenti-studio-primo.html"'
    - from: "src/pages/permesso-studio.html"
      to: "documenti-studio-rinnovo.html"
      via: "CTA button href"
      pattern: 'href="documenti-studio-rinnovo.html"'
---

<objective>
Design CTA button pattern and update permesso-studio.html as the template

Purpose: Establish the exact HTML pattern for CTA buttons and validate it works before propagating to all 21 permit pages
Output: permesso-studio.html updated with CTA buttons, document sections removed, ready to serve as template for propagation
</objective>

<execution_context>
@./.claude/agents/gsd-planner.md
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/15-document-deduplication/15-RESEARCH.md
@src/pages/permesso-studio.html
@src/styles/components.css (for .btn classes)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add CTA button section to permesso-studio.html</name>
  <files>src/pages/permesso-studio.html</files>
  <action>
Insert the CTA button section immediately after the PAGE HEADER section (after line 113, before <!-- CONTENT -->):

```html
  <!-- DOCUMENT CTA -->
  <section class="section" style="padding: 1.5rem 0;">
    <div class="container" style="max-width: 900px;">
      <div style="display: flex; flex-wrap: wrap; gap: 1rem; justify-content: center;">
        <a href="documenti-studio-primo.html" class="btn btn-primary btn-lg">
          Documenti per il primo rilascio
        </a>
        <a href="documenti-studio-rinnovo.html" class="btn btn-secondary btn-lg">
          Documenti per il rinnovo
        </a>
      </div>
    </div>
  </section>
```

Key characteristics:
- Uses existing .btn-primary (yellow gradient) and .btn-secondary (red gradient) classes
- .btn-lg for prominent size
- Flexbox with wrap for responsive behavior (stacks on mobile)
- Centered within container
- Same max-width as content (900px) for visual consistency
  </action>
  <verify>
Open permesso-studio.html in browser. Verify:
1. Two buttons appear between page header and content
2. Buttons are centered and side-by-side on desktop
3. "Documenti per il primo rilascio" is yellow (primary)
4. "Documenti per il rinnovo" is red (secondary)
5. Buttons stack vertically on mobile viewport
  </verify>
  <done>CTA button section visible in permesso-studio.html after page header</done>
</task>

<task type="auto">
  <name>Task 2: Remove inline document sections from permesso-studio.html</name>
  <files>src/pages/permesso-studio.html</files>
  <action>
Remove TWO document card sections from permesso-studio.html:

1. Remove the "Documenti - Primo Rilascio" card (around lines 162-187):
   - Starts with: `<div class="card" style="margin-bottom: 2rem;">`
   - Contains: `<h2>ðŸ“„ Documenti - Primo Rilascio</h2>`
   - Ends with: `</div>` after the ordered list

2. Remove the "Documenti - Rinnovo" card (around lines 189-209):
   - Starts with: `<div class="card" style="margin-bottom: 2rem;">`
   - Contains: `<h2>ðŸ”„ Documenti - Rinnovo</h2>`
   - Ends with: `</div>` after the ordered list

Do NOT remove other cards (Cos'e, Durata, Requisiti, Lavoro, Conversione, Costi, CTA alert).

Result: The CONTENT section should have cards for:
- Cos'e (keep)
- Durata (keep)
- Requisiti (keep)
- [REMOVED: Documenti - Primo Rilascio]
- [REMOVED: Documenti - Rinnovo]
- Lavoro (keep)
- Conversione (keep)
- Costi (keep)
- CTA alert (keep)
  </action>
  <verify>
Run: `grep -c "Documenti - Primo\|Documenti - Rinnovo\|Che documenti" src/pages/permesso-studio.html`
Expected: 0

Run: `grep "Cos'e\|Durata\|Requisiti\|Lavoro\|Conversione\|Costi" src/pages/permesso-studio.html | wc -l`
Expected: Non-zero (other sections preserved)
  </verify>
  <done>No inline document sections remain in permesso-studio.html; other content cards preserved</done>
</task>

<task type="auto">
  <name>Task 3: Verify CTA links work</name>
  <files>src/pages/permesso-studio.html</files>
  <action>
Verify that the CTA button links point to existing document pages:

1. Check documenti-studio-primo.html exists:
   `ls src/pages/documenti-studio-primo.html`

2. Check documenti-studio-rinnovo.html exists:
   `ls src/pages/documenti-studio-rinnovo.html`

3. Verify the redirect targets also exist (if they are redirect pages):
   `grep -o "url=[^\"]*" src/pages/documenti-studio-primo.html`
   Should show: `url=documenti-studio-art-39-primo.html`

   `ls src/pages/documenti-studio-art-39-primo.html` (should exist)

4. Final visual check: Open permesso-studio.html in browser, click both CTA buttons, verify they navigate to working document pages.
  </action>
  <verify>
Both CTA buttons navigate to valid document pages without 404 errors.
  </verify>
  <done>CTA buttons on permesso-studio.html link to working document pages</done>
</task>

</tasks>

<verification>
After all tasks complete:

1. **CTA buttons present:**
   ```bash
   grep -c "Documenti per il primo rilascio" src/pages/permesso-studio.html
   # Expected: 1
   ```

2. **Document sections removed:**
   ```bash
   grep -c "<h2>.*Documenti -" src/pages/permesso-studio.html
   # Expected: 0
   ```

3. **Other content preserved:**
   ```bash
   grep -c "<h2>" src/pages/permesso-studio.html
   # Expected: 7 (Cos'e, Durata, Requisiti, Lavoro, Conversione, Costi, Related)
   ```

4. **Visual check:** Open in browser, confirm buttons appear, content flows correctly
</verification>

<success_criteria>
- permesso-studio.html displays two CTA buttons after page header
- "Documenti per il primo rilascio" button links to documenti-studio-primo.html
- "Documenti per il rinnovo" button links to documenti-studio-rinnovo.html
- No inline document sections remain in permesso-studio.html
- Other content sections (Cos'e, Durata, Requisiti, etc.) are preserved
- Page renders correctly in browser (desktop and mobile)
</success_criteria>

<output>
After completion, create `.planning/phases/15-document-deduplication/15-01-SUMMARY.md`

Include:
- Exact CTA HTML pattern used (for Plan 02 propagation)
- Document section header patterns found (for removal regex)
- Any edge cases discovered
</output>
