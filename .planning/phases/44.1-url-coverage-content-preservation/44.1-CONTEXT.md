# Phase 44.1: URL Coverage & Content Preservation - Context

**Gathered:** 2026-02-16
**Status:** Ready for planning

<domain>
## Phase Boundary

Ensure every Notion DB permit has a working HTML page, old URLs redirect to canonical pages, variant permits have parent/hub pages, and content from old static files is preserved in Notion before those files become pure redirects.

</domain>

<decisions>
## Implementation Decisions

### Redirect system
- **Pattern:** Follow existing documentRedirects.js pattern — create `permitRedirects.js` data file + Liquid redirect template
- **Scope:** ~28 old URLs that need redirects to canonical Notion-generated pages
- **Categories:**
  - Short slug → canonical slug (e.g., "assistenza-minore" → "assistenza-minore-art-31")
  - Typo corrections (e.g., "cittaadino" → "cittadino", "amministravo" → "amministrativo", "famigliari" → "familiari")
  - Renamed permits (e.g., "coesione-familiare" → "famiglia-o-motivi-familiari-senza-nullaosta-per-ricongiungimento-coesione")
- **Redirect format:** Simple meta-refresh + JS redirect (same as document redirects)

### Parent/hub pages for variant groups
- **3 groups need parent pages:**
  1. **Studio** → children: studio-dopo-ingresso-con-visto, studio-conversione-da-altro-permesso
  2. **Lavoro Autonomo** → children: lavoro-autonomo-dopo-ingresso-per-flussi, lavoro-autonomo-a-seguito-di-conversione-da-altro-permesso
  3. **Cure Mediche art.19 (Gravidanza)** → children: cure-mediche-art-19-donna-in-stato-di-gravidanza, cure-mediche-art-19-padre
- **Parent page format:** Like existing permesso-lavoro-subordinato.html parent — brief description + cards linking to variant children
- **Note:** Lavoro Subordinato already has a working parent page (can use as reference)

### Content preservation
- **Process:** Before replacing static files with redirects, extract Q&A content from each static file and compare against the corresponding Notion page
- **If Notion is missing info that the static file has:** Migrate that info to Notion
- **If content is equivalent:** Safe to replace with redirect
- **Never lose content:** No static file deleted until its unique content (if any) is confirmed in Notion

### slugMap.js fixes
- **"prosieguo-amministrativo": "prosieguo-amministravo"** — target has a typo, should point to "integrazione-prosieguo-amministrativo" (the actual Notion slug)
- **Other stale targets:** Verify all slugMap targets still match generated pages

### Static file cleanup
- **After redirects + content migration:** Delete the old static files from src/pages/ (they're already ignored by 11ty, so this is cleanup)
- **Backup not needed:** Files are in git history

### Claude's Discretion
- Order of processing (redirects first, then parent pages, then content migration — or interleaved)
- Exact redirect page HTML format
- How to handle the 3 "duplicate-*" pages in _site/ (leftover from Phase 43 dedup)

</decisions>

<specifics>
## Specific Ideas

- "need to ensure that all notion DB entries exist as .html pages"
- "desambiguate and clarify hierarchy of lavoro and study permits"
- "ensure that if there is extra info on the existing .html, this is not lost"
- Use permesso-lavoro-subordinato.html parent page as reference for new parent pages

</specifics>

<deferred>
## Deferred Ideas

None

</deferred>

## Mapping Reference

### Old URLs → Canonical Generated Pages

| Old Static File | Type | Canonical Target |
|----------------|------|-----------------|
| permesso-asilo.html | redirect | permesso-richiesta-asilo.html (already works) |
| permesso-asilo-politico.html | content | permesso-asilo-status-rifugiato.html |
| permesso-assistenza-minore.html | content | permesso-assistenza-minore-art-31.html |
| permesso-attesa-occupazione.html | content | permesso-attesa-occupazione-art-22.html |
| permesso-calamita-naturale.html | content | permesso-calamita-naturale-art-20-bis.html |
| permesso-coesione-familiare.html | content | permesso-famiglia-o-motivi-familiari-senza-nullaosta-per-ricongiungimento-coesione.html |
| permesso-conviventi-familiari-italiani.html | content | permesso-famiglia-motivi-familiari-convivente-con-parente-cittadino-italiano-art-19.html |
| permesso-cure-mediche-art-36-d-lgs-286-1998.html | placeholder | permesso-cure-mediche-dopo-ingresso-con-visto-art-36.html |
| permesso-cure-mediche-ex-art-19-comma-2-lett-d-bis.html | placeholder | permesso-cure-mediche-per-persona-gravemente-malata-che-si-trova-gia-in-italia.html |
| permesso-cure-mediche-per-donna-in-stato-di-gravidanza-e-padre-del-bambino-art-19.html | content | PARENT → 2 children (donna + padre) |
| permesso-cure-mediche.html | content | permesso-cure-mediche-dopo-ingresso-con-visto-art-36.html |
| permesso-donna-in-stato-di-gravidanza-e-padre-del-bambino.html | content | PARENT → 2 children (donna + padre) |
| permesso-famiglia-motivi-famigliari-art-19.html | content | permesso-famiglia-motivi-familiari-convivente-con-parente-cittadino-italiano-art-19.html |
| permesso-famiglia-motivi-famigliari-art-30-dopo-ingresso-con-nullaosta.html | content | permesso-famiglia-motivi-familiari-dopo-ingresso-con-nullaosta-per-ricongiungimento-familiare.html |
| permesso-famiglia-motivi-familiari-art-30-dopo-ingresso-con-nullaosta.html | content | permesso-famiglia-motivi-familiari-dopo-ingresso-con-nullaosta-per-ricongiungimento-familiare.html |
| permesso-famiglia-motivi-familiari-art-30-senza-nullaosta-coesione.html | content | permesso-famiglia-o-motivi-familiari-senza-nullaosta-per-ricongiungimento-coesione.html |
| permesso-famiglia-motivi-familiari-convivente-con-parente-cittaadino-italiano-art-19.html | content | permesso-famiglia-motivi-familiari-convivente-con-parente-cittadino-italiano-art-19.html |
| permesso-familiari-di-cittadini-ue-carta-ue.html | content | permesso-carta-di-soggiorno-per-familiari-di-cittadini-ue-d-lgs-30-07.html |
| permesso-familiari-di-italiani-dinamici-carta-ue.html | content | permesso-carta-di-soggiorno-per-familiari-di-italiani-dinamici-d-lgs-30-07.html |
| permesso-famit-familiari-italiani-statici.html | content | permesso-famit-per-familiari-di-cittadini-italiani-statici.html |
| permesso-famit-per-familiari-di-cittidini-statici.html | content | permesso-famit-per-familiari-di-cittadini-italiani-statici.html |
| permesso-genitore-di-cittadino-italiano.html | content | permesso-famiglia-per-genitore-di-cittadino-italiano-art-30.html |
| permesso-genitore-minore-italiano.html | content | permesso-famiglia-per-genitore-di-cittadino-italiano-art-30.html |
| permesso-gravi-motivi-salute.html | content | permesso-cure-mediche-per-persona-gravemente-malata-che-si-trova-gia-in-italia.html |
| permesso-gravidanza.html | content | permesso-cure-mediche-art-19-donna-in-stato-di-gravidanza.html |
| permesso-lavoro-autonomo.html | placeholder | PARENT → 2 children (flussi + conversione) |
| permesso-minori-stranieri-affidati.html | content | permesso-affidamento-a-familiari-entro-il-quarto-grado.html |
| permesso-persona-gravemente-malata-che-si-trova-gia-in-italia.html | content | permesso-cure-mediche-per-persona-gravemente-malata-che-si-trova-gia-in-italia.html |
| permesso-prosieguo-amministrativo.html | content | permesso-integrazione-prosieguo-amministrativo.html |
| permesso-prosieguo-amministravo.html | content | permesso-integrazione-prosieguo-amministrativo.html |
| permesso-protezione-speciale-art-32-d-lgs-25-2008.html | content | permesso-protezione-speciale-dopo-decisione-positiva-della-commissione-o-del-tribunale-art-32-d-lgs-25-2008.html |
| permesso-protezione-speciale.html | content | permesso-protezione-speciale-dopo-decisione-positiva-della-commissione-o-del-tribunale-art-32-d-lgs-25-2008.html |
| permesso-ricongiungimento-familiare.html | content | permesso-famiglia-motivi-familiari-dopo-ingresso-con-nullaosta-per-ricongiungimento-familiare.html |
| permesso-studio.html | content | PARENT → 2 children (ingresso con visto + conversione) |

---

*Phase: 44.1-url-coverage-content-preservation*
*Context gathered: 2026-02-16*
