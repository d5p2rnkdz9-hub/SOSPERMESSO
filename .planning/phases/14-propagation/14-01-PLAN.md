---
phase: 14-propagation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/pages/*.html (97 files need footer update)
  - Note: 40 redirect-only files excluded, 1 file already updated
autonomous: true

must_haves:
  truths:
    - "Every full page in src/pages/ displays the yellow footer with 'Il Progetto' link"
    - "Footer links navigate correctly from any page (relative paths work)"
    - "Footer shows consistent structure: Il Progetto | Contatti | copyright"
  artifacts:
    - path: "src/pages/*.html"
      provides: "Yellow footer on all 98 full pages (excluding 40 redirect stubs)"
      contains: "footer-project-link"
  key_links:
    - from: "src/pages/*.html footer"
      to: "chi-siamo.html"
      via: "href attribute"
      pattern: 'href="chi-siamo.html"'
    - from: "src/pages/*.html footer"
      to: "form.typeform.com/to/USx16QN3"
      via: "Contatti link"
      pattern: 'href="https://form.typeform.com/to/USx16QN3"'
---

<objective>
Propagate yellow footer template to all pages in src/pages/

Purpose: Achieve visual consistency across all 98 full pages - every page should display the new yellow footer with "Il Progetto" and "Contatti" links, matching the template established in Phase 12.

Output: All full pages in src/pages/ updated with new footer structure (excluding 40 redirect-only files)
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/12-footer-redesign/12-01-SUMMARY.md
@.planning/phases/14-propagation/14-RESEARCH.md

Reference template (new footer structure from src/pages/index.html):
```html
<footer class="footer">
  <div class="container">
    <div class="footer-content">
      <a href="chi-siamo.html" class="footer-project-link">Il Progetto</a>
      <span class="footer-separator">|</span>
      <a href="https://form.typeform.com/to/USx16QN3" class="footer-project-link" target="_blank">Contatti</a>
      <span class="footer-separator">|</span>
      <p class="footer-copyright">© 2025 SOS Permesso</p>
    </div>
  </div>
</footer>
```

Old footer pattern to replace (has footer-links class):
```html
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      ...
    </div>
    <p class="footer-copyright">...</p>
  </div>
</footer>
```

File breakdown:
- 138 total HTML files in src/pages/
- 40 are redirect stubs (meta refresh only, no footer)
- 98 are full pages with footer structure
- 97 have old footer-links pattern (need update)
- 1 has new footer-project-link (index.html, already done)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Replace old footer with yellow footer in all pages</name>
  <files>src/pages/*.html (97 files with old footer)</files>
  <action>
Use sed to replace the old footer structure with the new yellow footer template.

The old footer pattern has `footer-links` class. Replace everything from `<footer class="footer">` to `</footer>` with the new template.

Use this sed range replacement (macOS syntax):
```bash
find src/pages -name "*.html" -type f -exec grep -l "footer-links" {} \; | while read file; do
  sed -i '' '/<footer class="footer">/,/<\/footer>/c\
  <footer class="footer">\
    <div class="container">\
      <div class="footer-content">\
        <a href="chi-siamo.html" class="footer-project-link">Il Progetto</a>\
        <span class="footer-separator">|</span>\
        <a href="https://form.typeform.com/to/USx16QN3" class="footer-project-link" target="_blank">Contatti</a>\
        <span class="footer-separator">|</span>\
        <p class="footer-copyright">© 2025 SOS Permesso</p>\
      </div>\
    </div>\
  </footer>' "$file"
done
```

Only process files that have the old footer-links pattern. Files already updated (like index.html) should be skipped.

Alternatively, use Python or a loop approach if sed multi-line replacement proves problematic:
```python
# Read each file, find footer section, replace with new template
```
  </action>
  <verify>
Run verification commands:
```bash
# Count files with old footer (should be 0)
grep -l "footer-links" src/pages/*.html | wc -l

# Count files with new footer (should be 98 - full pages only)
grep -l "footer-project-link" src/pages/*.html | wc -l

# Spot check 3 random files
shuf -n 3 -e src/pages/*.html | xargs grep -A 10 "footer class"
```
  </verify>
  <done>
- 0 files have old footer-links pattern
- 98 files have new footer-project-link pattern (all full pages)
- Spot check shows correct yellow footer structure
  </done>
</task>

<task type="auto">
  <name>Task 2: Verify navigation works from multiple pages</name>
  <files>None (verification only)</files>
  <action>
Test that relative paths work correctly for footer links:

1. Check that all footer "Il Progetto" links point to chi-siamo.html (relative, same directory)
2. Check that all Contatti links point to the correct Typeform URL
3. Verify no broken paths (like "../chi-siamo.html" which would be wrong)

```bash
# Verify all Il Progetto links use correct relative path
grep -h "footer-project-link.*Il Progetto" src/pages/*.html | sort -u

# Ensure no wrong paths exist
grep -l 'href="../chi-siamo.html"' src/pages/*.html || echo "No wrong paths found"
grep -l 'href="src/pages/chi-siamo.html"' src/pages/*.html || echo "No wrong paths found"
```
  </action>
  <verify>
All 98 full-page files use `href="chi-siamo.html"` (same-directory relative path) for Il Progetto link.
All 98 full-page files use `href="https://form.typeform.com/to/USx16QN3"` for Contatti link.
  </verify>
  <done>
- All footer links use correct paths
- No broken relative paths detected
  </done>
</task>

</tasks>

<verification>
Overall verification after all tasks:

```bash
# Final counts
echo "Files with new footer:"
grep -l "footer-project-link" src/pages/*.html | wc -l
# Expected: 98 (all full pages, excluding 40 redirect stubs)

echo "Files with old footer:"
grep -l "footer-links" src/pages/*.html | wc -l
# Expected: 0

echo "Footer link paths check:"
grep -oh 'href="[^"]*chi-siamo[^"]*"' src/pages/*.html | sort -u
# Expected: href="chi-siamo.html" only
```
</verification>

<success_criteria>
1. All 98 full pages in src/pages/ have the yellow footer with footer-project-link class
2. Zero pages have the old footer-links pattern
3. All Il Progetto links use relative path chi-siamo.html
4. All Contatti links open Typeform in new tab
</success_criteria>

<output>
After completion, create `.planning/phases/14-propagation/14-01-SUMMARY.md`
</output>
